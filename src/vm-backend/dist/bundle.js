!function(e){function t(i){if(a[i])return a[i].exports;var n=a[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var a={};t.m=e,t.c=a,t.d=function(e,a,i){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=20)}([function(e,t){e.exports=React},function(e,t){e.exports=antd},function(e,t,a){"use strict";var i=a(0),n=(function(e){e&&e.__esModule}(i),a(10));window.eventEmitter=new n.EventEmitter,window.EventsDispatcher={event:window.eventEmitter,showLoginDialog:function(){this.event.emit("showLoginDialog")},onRouteEnter:function(e){this.event.emit("onRouteEnter",e)},onTagAddSuccess:function(e){this.event.emit("onTagAddSuccess",e)},loadTagTableData:function(){this.event.emit("loadTagTableData")},onMovieSrcVersionAddSuccess:function(e){this.event.emit("onMovieSrcVersionAddSuccess",e)},loadMovieSrcVersionTableData:function(){this.event.emit("loadMovieSrcVersionTableData")},updateLoginAdminInfo:function(e){this.event.emit("updateLoginAdminInfo",e)},updateAdminMenuTree:function(e){this.event.emit("updateAdminMenuTree",e)},backToHomePage:function(){this.event.emit("backToHomePage")},stopPollingCheckOnlineAdmin:function(){this.event.emit("stopPollingCheckOnlineAdmin")},startPollingCheckOnlineAdmin:function(){this.event.emit("startPollingCheckOnlineAdmin")}};window.EventsDispatcher},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function fail(e){return e<0}function success(e){return e>0}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_antd=__webpack_require__(1),Option=_antd.Select.Option,OFF_LINE_CODE=-9999,_ajax={ajaxError:"网络不佳,请稍后重试",ajax:function(e){isUndefined(e.async)&&(e.async=!0),isUndefined(e.contentType)&&(e.contentType=_ajax.contentType.DEFAULT),isUndefined(e.data)||"application/json"!=e.contentType||(e.data=JSON.stringify(e.data)),isUndefined(e.dataType)&&(e.dataType="json"),isUndefined(e.processData)&&(e.processData=!0),isUndefined(e.enctype)&&(e.enctype="text/plain");var t=localStorage.getItem(vm_config.key_of_access_token),a={};a[vm_config.key_of_access_token]=t,$.ajaxSetup({headers:a}),e.url,e.data,$.ajax({url:vm_config.http_url_prefix+e.url,data:e.data,async:e.async,type:e.type,contentType:e.contentType,dataType:e.dataType,processData:e.processData,enctype:e.enctype,beforeSend:function(){isUndefined(e.beforeSend)||e.beforeSend()}.bind(this),success:function(t){if(success(t.code)&&!isUndefined(e.success)&&e.success(t),fail(t.code)&&!isUndefined(e.failure)){if(t.code==OFF_LINE_CODE)return window.EventsDispatcher.showLoginDialog(),void window.EventsDispatcher.stopPollingCheckOnlineAdmin();e.failure(t)}}.bind(this),error:function(t,a,i){1!=e.ignoreAjaxError&&_antd.message.error(this.ajaxError),isUndefined(e.error)||e.error(e,t,a,i)}.bind(this),complete:function(t,a){isUndefined(e.complete)||e.complete(e,t,a)}.bind(this)})},get:function(e){e.type="GET",this.ajax(e)},put:function(e){e.type="PUT",this.ajax(e)},post:function(e){e.type="POST",this.ajax(e)},delete:function(e){e.type="DELETE",e.contentType=_ajax.contentType.JSON,this.ajax(e)},contentType:{TEXT:"text/plain",JSON:"application/json",DEFAULT:"application/x-www-form-urlencoded"}},commons={rand:function(e){var t=e.max;return Math.floor(Math.random()*t)},getImmutableStrByIndex:function(e){var t=e.index;return commons.getImmutableStrs()[t-1]},getImmutableStrs:function(){return[_react2.default.createElement("span",{style:{color:"red"}},"内置对象"),_react2.default.createElement("span",{style:{color:"green"}},"非内置对象")]},getSharpnessStrByIndex:function(e){var t=e.index;return commons.getSharpnessStrs()[t-1]},getSharpnessOptions:function(){var e=commons.getSharpnessStrs();return commons.getOptions({data:e})},getSharpnessStrs:function(){return["标清","高清","超清"]},toStrArr:function(e){if(isEmptyList(e))return[];for(var t=0;t<e.length;t++)e[t]=e[t]+"";return e},getOptions:function(e){var t=e.start,a=e.data;isUndefined(t)&&(t=1);for(var i=[],n=0;n<a.length;n++){var o=n+t+"";i.push(_react2.default.createElement(Option,{key:n,value:o},a[n]))}return i},getStatusStrByIndex:function(e){var t=e.index;return commons.getStatusStrs()[t-1]},getStatusOptions:function(){var e=commons.getStatusStrs();return commons.getOptions({data:e})},getStatusStrs:function(){return[_react2.default.createElement("span",{style:{color:"green"}},"正常"),_react2.default.createElement("span",{style:{color:"red"}},"冻结")]},getSexStrs:function(){return["男","女","未知"]},getSexOptions:function(){var e=commons.getSexStrs();return commons.getOptions({data:e})},getBloodTypeStrs:function(){return["A","B","AB","O","E","未知"]},getBloodTypeStrByIndex:function(e){var t=e.index;return commons.getBloodTypeStrs()[t-1]},getBloodTypeOptions:function(){var e=commons.getBloodTypeStrs();return commons.getOptions({data:e})},getSexStrByIndex:function(e){return["男","女","未知"][e.index-1]},getConsStrs:function(){return["魔羯","水瓶","双鱼","牡羊","金牛","双子","巨蟹","狮子","处女","天秤","天蝎","射手","魔羯"]},getConStrByIndex:function(e){var t=e.index;return commons.getCons()[t]},getConStrByDate:function(e){var t=e.date,a=commons.transConIntByDate(_defineProperty({date:t},"date",t));return commons.transConStrByIndex(a)},getConIntByDate:function(e){var t=e.date,a=t.getMonth()+1;return a-(t.getDay()<"102223444433".charAt(a-1)- -19)},generateImgUrl:function(e){var t=e.width,a=e.imgUrl;return isUndefined(t)?vm_config.http_url_prefix+a:vm_config.http_url_prefix+a+"/"+t},makeTipSpan:function(e,t){isUndefined(t)&&(t=20);var a=e.substring(0,t);return e.length>20&&(a+="..."),_react2.default.createElement("span",{title:e},a)},timestamp:function(e){var t=(new Date).getTime();return e=addUrlParam({url:e,obj:{t:t}})},addUrlParam:function(e){var t=e.url,a=e.obj;for(var i in a){var n=a[i],o=getUrlParam(t,i);isUndefined(o)?t=t.indexOf("?")>-1?t+"&"+i+"="+n:t+"?"+i+"="+n:changeUrlParam(t,i,n)}return t},changeUrlParam:function changeUrlParam(url,arg,val){var pattern=arg+"=([^&]*)",replaceText=arg+"="+val;return url.match(pattern)?url.replace(eval("/("+arg+"=)([^&]*)/gi"),replaceText):url.match("[?]")?url+"&"+replaceText:url+"?"+replaceText},getUrlParam:function(e,t){for(var a=e.substring(1),i=a.split("&"),n=0;n<i.length;n++){var o=i[n].split("=");if(o[0]==t)return o[1]}},objDeepCopy:function(e){if(!isUndefined(e)){var t,a=e.constructor===Array?[]:{};if("object"===(void 0===e?"undefined":_typeof(e))){if(window.JSON)t=JSON.stringify(e),a=JSON.parse(t);else for(var i in e)a[i]="object"===_typeof(e[i])?cloneObj(e[i]):e[i];return a}}},clone:function(e){return commons.objDeepCopy(e)},updateObjByKey:function(e,t,a,i){for(var n=[],o=0;o<e.length;o++){var l=e[o];l[t]==a?n.push(i):n.push(l)}return n},getObjByKey:function(e,t,a){for(var i=0;i<e.length;i++){var n=e[i];if(n[t]==a){var o=void 0;try{o=commons.objDeepCopy(n)}catch(e){}return o}}},getFieldListByKey:function(e,t){for(var a=[],i=0;i<e.length;i++){var n=e[i];a.push(n[t])}return a},undefined2EmptyStr:function(e){if(isUndefined(e))return""},highLight:function(e,t){return isUndefined(t)?e:(e=e.replace(t,""),_react2.default.createElement("span",null,_react2.default.createElement("span",{style:{color:"red"}},t),e))}};exports.commons=commons,exports.ajax=_ajax},function(e,t){e.exports=ReactRouterDOM},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var o,l=a(0),r=i(l),s=a(1),d=a(26),u=i(d);a(2),a(15);var c=(s.Layout.Header,s.Layout.Content,s.Layout.Footer,s.Layout.Sider,s.Form.Item,s.Menu.SubMenu,r.default.createClass((o={displayName:"EditDialogTemple",getInitialState:function(){var e=this.props,t=e.width,a=e.height,i=e.maskClosable,n=e.closable,o=e.title;return isUndefined(n)&&(n=!0),isUndefined(i)&&(i=!1),isUndefined(t)&&(t="450px"),isUndefined(a)&&(a="300px"),isUndefined(o)&&(o="无标题"),{modelWidth:t,modelHeight:a,formLoading:!1,visible:!1,closable:n,maskClosable:i,title:o,closableCache:n}},registEvents:function(){},componentDidMount:function(){this.registEvents()},handleCancel:function(){this.closeDialog();var e=this.props.handleCancel;isUndefined(e)||e()},handleSubmit:function(e){this.formEnterLoading();var t=this.props.handleSubmit;isUndefined(t)||t(e)},formEnterLoading:function(){this.updateFormLoading(!0),this.updateClosable(!1)},formLeaveLoading:function(){var e=this.state.closableCache;this.updateFormLoading(!1),e&&this.updateClosable(!0)},updateClosable:function(e){this.setState({closable:e})},updateFormLoading:function(e){var t=this.state;t.formLoading=e,this.setState(t)},closeDialog:function(){this.updateStateVisible(!1)},showDialog:function(){this.updateStateVisible(!0)},updateStateVisible:function(e){var t=this.state;t.visible=e,this.setState(t)}},n(o,"componentDidMount",function(){}),n(o,"saveFormRef",function(e){this.form=e}),n(o,"clearForm",function(){this.form.resetFields()}),n(o,"afterClose",function(){var e=this.props.afterClose;isUndefined(e)||e()}),n(o,"render",function(){var e=this.props,t=e.formRows,a=e.formLayout,i=this.state,n=i.modelWidth,o=i.modelHeight,l=i.closable,d=i.maskClosable,c=i.formLoading,m=i.visible,f=i.title;return r.default.createElement("div",{id:"user_edit_dialog"},r.default.createElement(s.Modal,{className:"extra",visible:m,title:f,onCancel:this.handleCancel,afterClose:this.afterClose,width:n,height:o,closable:l,maskClosable:d,footer:null},r.default.createElement(u.default,{ref:this.saveFormRef,handleSubmit:this.handleSubmit,formRows:t,formLayout:a,loading:c})))}),o)));t.default=c},function(e,t,a){e.exports=a(37)(0)},function(e,t){e.exports=ReactDOM},function(e,t){},function(e,t){},function(e,t){function a(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function n(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function l(e){return void 0===e}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0,a.defaultMaxListeners=10,a.prototype.setMaxListeners=function(e){if(!n(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},a.prototype.emit=function(e){var t,a,n,r,s,d;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(a=this._events[e],l(a))return!1;if(i(a))switch(arguments.length){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:r=Array.prototype.slice.call(arguments,1),a.apply(this,r)}else if(o(a))for(r=Array.prototype.slice.call(arguments,1),d=a.slice(),n=d.length,s=0;s<n;s++)d[s].apply(this,r);return!0},a.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(n=l(this._maxListeners)?a.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.trace),this},a.prototype.on=a.prototype.addListener,a.prototype.once=function(e,t){function a(){this.removeListener(e,a),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var n=!1;return a.listener=t,this.on(e,a),this},a.prototype.removeListener=function(e,t){var a,n,l,r;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=this._events[e],l=a.length,n=-1,a===t||i(a.listener)&&a.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(a)){for(r=l;r-- >0;)if(a[r]===t||a[r].listener&&a[r].listener===t){n=r;break}if(n<0)return this;1===a.length?(a.length=0,delete this._events[e]):a.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},a.prototype.removeAllListeners=function(e){var t,a;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(a=this._events[e],i(a))this.removeListener(e,a);else if(a)for(;a.length;)this.removeListener(e,a[a.length-1]);return delete this._events[e],this},a.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},a.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},a.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var o,l=a(0),r=i(l),s=a(1);a(2),a(15);var d=a(39),u=i(d),c=(a(3),s.Layout.Header,s.Layout.Content,s.Layout.Footer,s.Layout.Sider,s.Form.Item,s.Menu.SubMenu,r.default.createClass((o={displayName:"ImgUploaderDialogTemplate",getInitialState:function(){var e=this.props,t=e.width,a=e.config,i=e.title;return isUndefined(t)&&(t="650px"),{width:t,visible:!1,title:i,config:a}},registEvents:function(){},componentDidMount:function(){this.registEvents()},handleCancel:function(){this.closeDialog();var e=this.props.handleCancel;isUndefined(e)||e()},afterClose:function(){var e=this.props.afterClose;isUndefined(e)||e()},closeDialog:function(){this.updateStateVisible(!1),this.getImgUploader().clearSelectFileInfo()},showDialog:function(){this.updateStateVisible(!0)},updateExtraInfo:function(e){var t=this.state;this.state.config.extraInfo=e,this.setState(t)},previewImg:function(e){setTimeout(function(){this.getImgUploader().previewImg(e)}.bind(this))},getImgUploader:function(){return this.refs.img_uploader},updateStateVisible:function(e){var t=this.state;t.visible=e,this.setState(t)}},n(o,"componentDidMount",function(){}),n(o,"onUpdateImgSuccess",function(e){this.updateStateVisible(!1),(0,this.props.onUpdateImgSuccess)(e)}),n(o,"onUploadTempImgSuccess",function(e){(0,this.props.onUploadTempImgSuccess)(e)}),n(o,"render",function(){var e=this.props.title,t=this.state,a=t.width,i=t.visible,n=t.config;return r.default.createElement(s.Modal,{className:"extra",visible:i,title:e,onCancel:this.handleCancel,afterClose:this.afterClose,width:a,footer:null},r.default.createElement(u.default,{ref:"img_uploader",onUpdateImgSuccess:this.onUpdateImgSuccess,onUploadTempImgSuccess:this.onUploadTempImgSuccess,config:n}))}),o)));t.default=c},function(e,t){},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(7),o=(i(n),a(0)),l=i(o),r=a(1);a(10);a(14),a(2);var s=a(4),d=(a(3),a(22)),u=i(d),c=(r.Layout.Header,r.Layout.Content,r.Layout.Footer,r.Layout.Sider,r.Menu.SubMenu,l.default.createClass({displayName:"HomePage",getInitialState:function(){return{}},componentDidMount:function(){},render:function(){return l.default.createElement("div",null,l.default.createElement(r.Row,{justify:"center",align:"middle"},l.default.createElement(r.Col,{span:6}),l.default.createElement(r.Col,{span:6},l.default.createElement(u.default,null)),l.default.createElement(r.Col,{span:12})))}}));t.default=(0,s.withRouter)(c)},function(e,t){},function(e,t){},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=a(1);a(4);a(2),a(42);var l=a(3),r=(o.Select.Option,o.Layout.Header,o.Layout.Content,o.Layout.Footer,o.Layout.Slider,o.Menu.SubMenu,o.Input.Search),s=(o.Input.TextArea,n.default.createClass({displayName:"UserLoginLogsTable",getInitialState:function(){return{userEditDialog:{echoData:void 0},userLoginLogsTable:{title:"用户登录日志列表",dataSourceUrl:"/user/login/logs",editable:!1,haveSearchUsername:!1,usernameDropdownVisible:!1,bordered:!1,tableLoading:!1,refreshBtnLoading:!1,data:[],originalData:[],page:{start:0,size:5,orderBy:"",orderType:"",total:0},query:{username:"",userId:null},columns:[],deletingTip:"正在删除"}}},updateUserIdOfQuery:function(e){var t=this.state;t.userLoginLogsTable.query.userId=e,this.setState(t)},loadDataByUserId:function(e){this.updateUserIdOfQuery(e),this.loadUserLoginLogsTableData()},onSearchUsername:function(e){this.updateUsernameOfQuery(e),isEmptyString(this.state.userLoginLogsTable.query.username)?this.updateHaveSearchUsername(!1):this.updateHaveSearchUsername(!0),this.loadUserLoginLogsTableData()},updateHaveSearchUsername:function(e){var t=this.state;t.userLoginLogsTable.haveSearchUsername=e,this.setState(t)},updateUsernameOfQuery:function(e){var t=this.state;t.userLoginLogsTable.query.username=e,this.setState(t)},updateUserLoginLogsTableData:function(e){var t=this.state;t.userLoginLogsTable.data=e,this.setState(t)},updateUserLoginLogsTableRefreshBtnLoading:function(e){var t=this.state;t.userLoginLogsTable.refreshBtnLoading=e,this.setState(t)},updateUserLoginLogsTablePage:function(e){var t=this.state;t.userLoginLogsTable.page=e,this.setState(t)},updateUserLoginLogsTableQuery:function(e){var t=this.state;t.userLoginLogsTable.query=e,this.setState(t)},updateUserLoginLogsTableLoading:function(e){var t=this.state;t.userLoginLogsTable.tableLoading=e,this.setState(t)},updateUserLoginLogsTableColumns:function(e){var t=this.state;t.userLoginLogsTable.columns=e,this.setState(t)},updateUserLoginLogsTableOriginalData:function(e){var t=this.state;t.userLoginLogsTable.originalData=e,this.setState(t)},componentDidMount:function(){var e=this.state.userLoginLogsTable,t=e.query,a=e.haveSearchUsername;this.updateUserLoginLogsTableColumns([{title:"id",width:100,dataIndex:"id",sorter:!0},{title:"用户名",width:100,dataIndex:"username",render:function(e,a){return isUndefined(e)?"未知":l.commons.highLight(e,t.username)},sorter:!0,filterDropdown:n.default.createElement("div",{className:"custom-filter-dropdown"},n.default.createElement(r,{placeholder:"搜索用户名",onSearch:this.onSearchUsername,style:{width:200}})),filterIcon:n.default.createElement(o.Icon,{type:"search",style:{color:a?"#108ee9":"#aaa"}})},{title:"登录ip",width:100,dataIndex:"login_ip",sorter:!0},{title:"操作系统",width:100,dataIndex:"system",sorter:!0},{title:"分辨率",width:100,dataIndex:"dpi",sorter:!0},{title:"浏览器",width:100,dataIndex:"brower",sorter:!0},{title:"国家",width:100,dataIndex:"country",sorter:!0},{title:"省份",width:100,dataIndex:"province",sorter:!0},{title:"城市",width:100,dataIndex:"city",sorter:!0},{title:"登陆时间",width:100,dataIndex:"login_time",render:function(e){return timeFormatter.formatTime(1e3*e)},sorter:!0}])},handleTableChange:function(e,t,a){var i=this.state.userLoginLogsTable.page,n=e.pageSize,o=(e.current-1)*n,l=isUndefined(a.field)?"":a.field,r=isUndefined(a.order)?"":a.order;this.updateUserLoginLogsTablePage({start:o,size:n,orderBy:l,orderType:r,total:i.total}),this.loadUserLoginLogsTableData()},userLoginLogsTableDataFiledsConverter:function(e){var t=[];return $.each(e,function(e,a){t.push({key:e,id:a.id,username:a.username,create_time:a.createTime,update_time:a.updateTime,user_id:a.userId,login_ip:a.loginIp,system:a.system,dpi:a.dpi,brower:a.brower,country:a.country,province:a.province,city:a.city,login_time:a.loginTime,result:a.result})}.bind(this)),t},loadUserLoginLogsTableData:function(){this.updateUserLoginLogsTableLoading(!0),this.updateUserLoginLogsTableRefreshBtnLoading(!0);var e=this.state.userLoginLogsTable,t=e.page,a=e.query,i=t.orderType;"descend"==i&&(i="desc"),"ascend"==i&&(i="asc"),t.orderType=i,l.ajax.get({url:this.state.userLoginLogsTable.dataSourceUrl,data:$.extend(t,a),success:function(e){var t=e.data.list,a=this.userLoginLogsTableDataFiledsConverter(t);this.updateUserLoginLogsTableOriginalData(t),this.updateUserLoginLogsTableData(a);var i=this.state.userLoginLogsTable.page;this.updateUserLoginLogsTablePage({start:i.start,size:i.size,orderBy:i.orderBy,orderType:i.orderType,total:e.data.total})}.bind(this),failure:function(e){o.message.error(e.msg)}.bind(this),error:function(){}.bind(this),complete:function(){this.updateUserLoginLogsTableLoading(!1),this.updateUserLoginLogsTableRefreshBtnLoading(!1)}.bind(this)})},render:function(){var e=this.state.userLoginLogsTable,t=e.title,a=e.columns,i=e.data,l=e.page,r=e.tableLoading,s=e.refreshBtnLoading,d=e.bordered;return n.default.createElement("div",{id:"user_login_logs_table"},n.default.createElement("div",{style:{marginBottom:16}},n.default.createElement(o.Button,{loading:s,onClick:this.loadUserLoginLogsTableData},"刷新")),n.default.createElement(o.Table,{locale:{emptyText:"暂无用户数据"},columns:a,dataSource:i,pagination:{total:l.total,showTotal:function(e,t){return"第 "+t[0]+"-"+t[1]+" 条记录 , 共 "+e+" 条记录"},pageSize:l.size,defaultCurrent:1},loading:r,onChange:this.handleTableChange,bordered:d,title:function(){return t},scroll:{x:"100%",y:"100%"}}))}}));t.default=s},function(e,t){},function(e,t){},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=a(1);a(4);a(2),a(72);var l=a(3),r=(o.Select.Option,o.Layout.Header,o.Layout.Content,o.Layout.Footer,o.Layout.Slider,o.Menu.SubMenu,o.Input.Search),s=(o.Input.TextArea,n.default.createClass({displayName:"AdminLoginLogsTable",getInitialState:function(){return{adminEditDialog:{echoData:void 0},adminLoginLogsTable:{title:"管理员登录日志列表",dataSourceUrl:"/admin/login/logs/info/list",editable:!1,haveSearchAdminname:!1,adminnameDropdownVisible:!1,bordered:!1,tableLoading:!1,refreshBtnLoading:!1,data:[],originalData:[],page:{start:0,size:5,orderBy:"",orderType:"",total:0},query:{username:"",adminId:null},columns:[],deletingTip:"正在删除"}}},updateAdminIdOfQuery:function(e){var t=this.state;t.adminLoginLogsTable.query.adminId=e,this.setState(t)},loadDataByAdminId:function(e){this.updateAdminIdOfQuery(e),this.loadAdminLoginLogsTableData()},onSearchAdminname:function(e){this.updateAdminnameOfQuery(e),isEmptyString(this.state.adminLoginLogsTable.query.username)?this.updateHaveSearchAdminname(!1):this.updateHaveSearchAdminname(!0),this.loadAdminLoginLogsTableData()},updateHaveSearchAdminname:function(e){var t=this.state;t.adminLoginLogsTable.haveSearchAdminname=e,this.setState(t)},updateAdminnameOfQuery:function(e){var t=this.state;t.adminLoginLogsTable.query.username=e,this.setState(t)},updateAdminLoginLogsTableData:function(e){var t=this.state;t.adminLoginLogsTable.data=e,this.setState(t)},updateAdminLoginLogsTableRefreshBtnLoading:function(e){var t=this.state;t.adminLoginLogsTable.refreshBtnLoading=e,this.setState(t)},updateAdminLoginLogsTablePage:function(e){var t=this.state;t.adminLoginLogsTable.page=e,this.setState(t)},updateAdminLoginLogsTableQuery:function(e){var t=this.state;t.adminLoginLogsTable.query=e,this.setState(t)},updateAdminLoginLogsTableLoading:function(e){var t=this.state;t.adminLoginLogsTable.tableLoading=e,this.setState(t)},updateAdminLoginLogsTableColumns:function(e){var t=this.state;t.adminLoginLogsTable.columns=e,this.setState(t)},updateAdminLoginLogsTableOriginalData:function(e){var t=this.state;t.adminLoginLogsTable.originalData=e,this.setState(t)},componentDidMount:function(){var e=this.state.adminLoginLogsTable,t=e.query,a=e.haveSearchAdminname;this.updateAdminLoginLogsTableColumns([{title:"id",width:100,dataIndex:"id",sorter:!0},{title:"管理员",width:100,dataIndex:"username",render:function(e,a){return isUndefined(e)?"未知":l.commons.highLight(e,t.username)},sorter:!0,filterDropdown:n.default.createElement("div",{className:"custom-filter-dropdown"},n.default.createElement(r,{placeholder:"搜索管理员",onSearch:this.onSearchAdminname,style:{width:200}})),filterIcon:n.default.createElement(o.Icon,{type:"search",style:{color:a?"#108ee9":"#aaa"}})},{title:"登录ip",width:100,dataIndex:"login_ip",sorter:!0},{title:"操作系统",width:100,dataIndex:"system",sorter:!0},{title:"分辨率",width:100,dataIndex:"dpi",sorter:!0},{title:"浏览器",width:100,dataIndex:"brower",sorter:!0},{title:"国家",width:100,dataIndex:"country",sorter:!0},{title:"省份",width:100,dataIndex:"province",sorter:!0},{title:"城市",width:100,dataIndex:"city",sorter:!0},{title:"登陆时间",width:100,dataIndex:"login_time",render:function(e){return timeFormatter.formatTime(1e3*e)},sorter:!0}])},handleTableChange:function(e,t,a){var i=this.state.adminLoginLogsTable.page,n=e.pageSize,o=(e.current-1)*n,l=isUndefined(a.field)?"":a.field,r=isUndefined(a.order)?"":a.order;this.updateAdminLoginLogsTablePage({start:o,size:n,orderBy:l,orderType:r,total:i.total}),this.loadAdminLoginLogsTableData()},adminLoginLogsTableDataFiledsConverter:function(e){var t=[];return $.each(e,function(e,a){t.push({key:e,id:a.id,username:a.username,create_time:a.createTime,update_time:a.updateTime,admin_id:a.adminId,login_ip:a.loginIp,system:a.system,dpi:a.dpi,brower:a.brower,country:a.country,province:a.province,city:a.city,login_time:a.loginTime,result:a.result})}.bind(this)),t},loadAdminLoginLogsTableData:function(){this.updateAdminLoginLogsTableLoading(!0),this.updateAdminLoginLogsTableRefreshBtnLoading(!0);var e=this.state.adminLoginLogsTable,t=e.page,a=e.query,i=t.orderType;"descend"==i&&(i="desc"),"ascend"==i&&(i="asc"),t.orderType=i,l.ajax.get({url:this.state.adminLoginLogsTable.dataSourceUrl,data:$.extend(t,a),success:function(e){var t=e.data.list,a=this.adminLoginLogsTableDataFiledsConverter(t);this.updateAdminLoginLogsTableOriginalData(t),this.updateAdminLoginLogsTableData(a);var i=this.state.adminLoginLogsTable.page;this.updateAdminLoginLogsTablePage({start:i.start,size:i.size,orderBy:i.orderBy,orderType:i.orderType,total:e.data.total})}.bind(this),failure:function(e){o.message.error(e.msg)}.bind(this),error:function(){}.bind(this),complete:function(){this.updateAdminLoginLogsTableLoading(!1),this.updateAdminLoginLogsTableRefreshBtnLoading(!1)}.bind(this)})},render:function(){var e=this.state.adminLoginLogsTable,t=e.title,a=e.columns,i=e.data,l=e.page,r=e.tableLoading,s=e.refreshBtnLoading,d=e.bordered;return n.default.createElement("div",{id:"admin_login_logs_table"},n.default.createElement("div",{style:{marginBottom:16}},n.default.createElement(o.Button,{loading:s,onClick:this.loadAdminLoginLogsTableData},"刷新")),n.default.createElement(o.Table,{locale:{emptyText:"暂无用户数据"},columns:a,dataSource:i,pagination:{total:l.total,showTotal:function(e,t){return"第 "+t[0]+"-"+t[1]+" 条记录 , 共 "+e+" 条记录"},pageSize:l.size,defaultCurrent:1},loading:r,onChange:this.handleTableChange,bordered:d,title:function(){return t},scroll:{x:"100%",y:"100%"}}))}}));t.default=s},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=a(7),o=i(n),l=a(0),r=i(l),s=a(21),d=i(s);o.default.render(r.default.createElement(d.default,null),document.getElementById("react_dom_index"))},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(7),o=(i(n),a(0)),l=i(o),r=a(1),s=a(13),d=(i(s),a(4));a(2);var u=a(23),c=i(u),m=a(25),f=i(m),g=a(29),h=i(g),p=a(31),b=i(p);a(3);a(80);var v=r.Layout.Header,T=r.Layout.Content,y=r.Layout.Footer,S=r.Layout.Sider,E=(r.Menu.SubMenu,l.default.createClass({displayName:"Index",getInitialState:function(){return{collapsed:!1}},onCollapse:function(e){this.setState({collapsed:e})},render:function(){return l.default.createElement("div",{id:"index"},l.default.createElement(f.default,{ref:"login_dialog"}),l.default.createElement(d.HashRouter,null,l.default.createElement(r.Layout,{style:{minHeight:"100vh"}},l.default.createElement(S,{collapsible:!0,collapsed:this.state.collapsed,onCollapse:this.onCollapse},l.default.createElement(h.default,null)),l.default.createElement(r.Layout,null,l.default.createElement(v,{style:{background:"#fff",padding:0}},l.default.createElement(c.default,null)),l.default.createElement(T,{style:{margin:"0 16px"}},l.default.createElement(r.Breadcrumb,{style:{margin:"16px 0"}},l.default.createElement(r.Breadcrumb.Item,null,"User"),l.default.createElement(r.Breadcrumb.Item,null,"Bill")),l.default.createElement("div",{style:{paddingLeft:24,paddingRight:24,background:"#fff",minHeight:360}},l.default.createElement(b.default,null))),l.default.createElement(y,{style:{textAlign:"center"}},"Vm backend ©2016 Created by Zhangke")))))}}));t.default=E},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(7),o=(i(n),a(0)),l=i(o),r=a(1);a(10);a(14),a(2);var s=(a(4),a(3),r.Layout.Header,r.Layout.Content,r.Layout.Footer,r.Layout.Sider,r.Menu.SubMenu,l.default.createClass({displayName:"MovieClsCount",getInitialState:function(){return{}},componentDidMount:function(){echarts.init($(this.refs.chartContainer)).setOption(this.getOption(),!0)},getOption:function(){return{title:{text:"电影类型分布",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{x:"center",y:"bottom",data:["惊悚","恐怖","喜剧"]},calculable:!0,series:[{name:"半径模式",type:"pie",radius:[20,110],roseType:"radius",data:[{value:112130,name:"惊悚"},{value:212313,name:"恐怖"},{value:10311,name:"喜剧"}]}]}},render:function(){return l.default.createElement("div",{ref:"chartContainer"})}}));t.default=s},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=a(1);a(24),a(2);var l=a(3),r=(o.Form.Item,o.Layout.Header,o.Layout.Content,o.Layout.Footer,o.Layout.Sider,o.Menu.SubMenu,n.default.createClass({displayName:"Head",getInitialState:function(){return{checkUrl:"/admin/online",logoutUrl:"/admin/logout",tipOfLogouting:"正在登出",admin:{},colorList:["#f56a00","#7265e6","#ffbf00","#00a2ae"],pollingTimer:void 0,pollingInterval:5e3}},componentDidMount:function(){this.startPollingCheckOnlineAdmin(),this.registEvents()},startPollingCheckOnlineAdmin:function(){var e=this.state,t=e.pollingInterval,a=e.pollingTimer;isUndefined(a)&&(this.checkOnlineAdmin(),a=setInterval(function(){this.checkOnlineAdmin()}.bind(this),t),this.updatePollingTimer(a))},stopPollingCheckOnlineAdmin:function(){var e=this.state.pollingTimer;clearInterval(e),this.updatePollingTimer(void 0)},updatePollingTimer:function(e){this.setState({pollingTimer:e})},registEvents:function(){var e=this;window.eventEmitter.on("stopPollingCheckOnlineAdmin",function(){e.stopPollingCheckOnlineAdmin()}),window.eventEmitter.on("startPollingCheckOnlineAdmin",function(){e.startPollingCheckOnlineAdmin()}),window.eventEmitter.on("updateLoginAdminInfo",function(t){isUndefined(t)&&(t={}),e.updateAdmin(t)})},updateAdmin:function(e){this.setState({admin:e})},checkOnlineAdmin:function(){var e=this.state.checkUrl;l.ajax.get({url:e,ignoreAjaxError:!0,success:function(e){var t=e.data.admin;isUndefined(t)?(window.EventsDispatcher.showLoginDialog(),window.EventsDispatcher.updateLoginAdminInfo(void 0),window.EventsDispatcher.stopPollingCheckOnlineAdmin()):window.EventsDispatcher.updateLoginAdminInfo(t)}.bind(this),failure:function(e){window.EventsDispatcher.showLoginDialog()},complete:function(){}.bind(this)})},logout:function(){var e=this.state,t=e.logoutUrl,a=e.tipOfLogouting,i=o.message.loading(a,0);l.ajax.put({url:t,success:function(e){o.message.success(e.msg),window.EventsDispatcher.showLoginDialog(),window.EventsDispatcher.updateLoginAdminInfo(void 0)}.bind(this),failure:function(e){o.message.error(e.msg)},complete:function(){i()}.bind(this)})},render:function(){var e=this.state,t=e.admin,a=e.colorList,i=t.username,l=a[0],r=n.default.createElement(o.Menu,null,n.default.createElement(o.Menu.Item,null,n.default.createElement("a",{onClick:this.logout},"注销")));return n.default.createElement("div",{id:"head"},n.default.createElement("div",{style:{fontSize:25,color:"#22B9FF",float:"left"}},"VM后台管理系统"),n.default.createElement("div",{style:{color:"#22B9FF",float:"right"}},n.default.createElement(o.Dropdown,{overlay:r},n.default.createElement(o.Avatar,{style:{cursor:"pointer",backgroundColor:l,verticalAlign:"middle"},size:"large"},i))))}}));t.default=r},function(e,t){},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(5),s=i(r);a(2);var d=a(3);a(28);var u=(l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Sider,l.Form.Item,l.Menu.SubMenu,o.default.createClass({displayName:"LoginDialog",getInitialState:function(){return{width:350,title:"登录",closable:!1,loginUrl:"/admin/login",tipOfLogining:"正在登录"}},registEvents:function(){var e=this;window.eventEmitter.on("showLoginDialog",function(){e.showLoginDialog()})},componentDidMount:function(){this.registEvents()},showLoginDialog:function(){this.getAdminLoginDialog().showDialog()},getAdminLoginDialog:function(){return this.refs.login_dialog},handleCancel:function(){},handleSubmit:function(e){var t=this.state,a=t.loginUrl,i=t.tipOfLogining,n=l.message.loading(i,0),o=$.extend(e,getVisitInfoObj());d.ajax.post({url:a,data:o,success:function(e){var t=e.data.admin;localStorage.setItem(vm_config.key_of_access_token,t.token),l.message.success(e.msg),this.getAdminLoginDialog().closeDialog(),window.EventsDispatcher.updateLoginAdminInfo(t),this.getAdminLoginDialog().clearForm(),window.EventsDispatcher.startPollingCheckOnlineAdmin()}.bind(this),failure:function(e){l.message.error(e.msg)},complete:function(){n(),this.getAdminLoginDialog().formLeaveLoading()}.bind(this)})},render:function(){var e=[{cols:[{col:{span:24},label:"用户名",id:"username",config:{rules:[{required:!0,whitespace:!0,message:"请输入用户名!"}]},input:o.default.createElement(l.Input,{autoComplete:"off",name:"username",prefix:o.default.createElement(l.Icon,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"请输入您的用户名"})}]},{cols:[{col:{span:24},label:"密码",id:"password",config:{rules:[{required:!0,whitespace:!0,message:"请输入密码!"}]},input:o.default.createElement(l.Input,{name:"password",type:"password",autoComplete:"off",prefix:o.default.createElement(l.Icon,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"请输入您的密码"})}]}],t=this.state,a=t.width,i=t.title,n=t.closable;return o.default.createElement(s.default,{ref:"login_dialog",title:i,width:a,closable:n,formRows:e,handleSubmit:this.handleSubmit,handleCancel:this.handleCancel})}}));t.default=u},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=a(7),l=(i(o),a(0)),r=i(l),s=a(1);a(4);a(2),a(27);var d=(a(3),s.Layout.Header,s.Layout.Content,s.Layout.Footer,s.Layout.Sider,s.Form.Item),u=(s.Menu.SubMenu,r.default.createClass({displayName:"EditFormTempleWrapper",getInitialState:function(){return{}},componentDidMount:function(){},handleSubmit:function(e){var t=this.props.handleSubmit;e.preventDefault(),this.props.form.validateFields(function(e,a){e||isUndefined(t)||t(a)}.bind(this))},generateFormRows:function(e){var t=this.props.form.getFieldDecorator;return e.map(function(e,a){var i=e.cols,o=i.map(function(e,a){var i=e.config,o=e.id,l=e.input,u=e.label,c=e.col,m=e.wrapperCol,f=e.labelCol;if(isUndefined(i))i={};else{isUndefined(i.validateFirst)&&(i.validateFirst=!0);var g=n(i.initialValue);isUndefined(i.initialValue)||"number"!=g&&"boolean"!=g||(i.initialValue=i.initialValue+"")}return isUndefined(o)&&(o=uuid()),isUndefined(c)&&(c={}),isUndefined(c.span)&&(c.span=null),isUndefined(m)&&(m=null),isUndefined(f)&&(f=null),isUndefined(u)&&(u=null),r.default.createElement(s.Col,{span:c.span,key:a},r.default.createElement(d,{label:u,wrapperCol:m,labelCol:f},t(o,i)(l)))}.bind(this));return r.default.createElement(d,{key:a},o)}.bind(this))},render:function(){var e=this.props,t=e.loading,a=e.formRows,i=e.formLayout,n=this.generateFormRows(a);return isUndefined(i)&&(i=null),r.default.createElement(s.Form,{onSubmit:this.handleSubmit,id:"edit-form",ref:"edit_form"},n,r.default.createElement(d,null,r.default.createElement(s.Col,{span:"24"},r.default.createElement(s.Input,{style:{display:"none"}}))),r.default.createElement(d,null,r.default.createElement(s.Button,{loading:t,type:"primary",htmlType:"submit",id:"edit-form-button"},"提交")))}})),c=s.Form.create({})(u);t.default=c},function(e,t){},function(e,t){},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=a(1),l=a(4),r=a(3);a(30),a(2);var s=(o.Form.Item,o.Layout.Header,o.Layout.Content,o.Layout.Footer,o.Layout.Sider,o.Menu.SubMenu),d=n.default.createClass({displayName:"Nav",getInitialState:function(){return{selectedKeys:[this.props.location.pathname],openKeys:[],menuTheme:"dark",menus:[],menuUrl:"/admin/menu/tree/byAdminId/",tipOfLoadMenus:"正在加载菜单"}},componentDidMount:function(){this.registEvents()},updateMenus:function(e){isUndefined(e)&&(e=[]);for(var t=[],a=0;a<e.length;a++)t.push(e[a].keyProp);t.push("homeMenu"),this.setState({menus:e}),this.updateOpenKeys(t)},backToHomePage:function(){o.message.destroy(),"/"!=this.props.location.pathname&&this.stepPage("/")},registEvents:function(){var e=this;window.eventEmitter.on("backToHomePage",function(){e.backToHomePage()}),window.eventEmitter.on("onRouteEnter",function(t){setTimeout(function(){var a=t.pathname;e.updateSelectKeys([a])},1)}),window.eventEmitter.on("updateAdminMenuTree",function(t){e.updateMenus(t)}),window.eventEmitter.on("updateLoginAdminInfo",function(t){if(isUndefined(t)){var a=[];e.updateMenus(a),window.EventsDispatcher.updateAdminMenuTree(a)}else{var i=e.state,n=i.menuUrl;i.tipOfLoadMenus;r.ajax.get({url:n+t.id,success:function(e){var t=e.data.tree;window.EventsDispatcher.updateAdminMenuTree(t)}.bind(e),failure:function(e){},complete:function(){}.bind(e)})}})},updateSelectKeys:function(e){var t=this.state;t.selectedKeys=e,this.setState(t)},updateOpenKeys:function(e){var t=this.state;t.openKeys=e,this.setState(t)},onMenuItmClick:function(e){var t=(e.item,e.key);e.keyPath;this.stepPage(t)},stepPage:function(e){var t=[];t.push(e),this.updateSelectKeys(t),this.props.history.push({pathname:e,query:{param:"66"}})},onSubMenuClick:function(e){var t=e.key,a=(e.domEvent,this.state.openKeys);a.contains(t)?a.remove(t,!0):a.push(t),this.updateOpenKeys(a)},render:function(){var e=this.state,t=e.selectedKeys,a=e.openKeys,i=e.menuTheme,l=e.menus;return n.default.createElement("div",null,n.default.createElement("div",{id:"logo"},n.default.createElement("span",{id:"logo_v"},"V"),n.default.createElement("span",{id:"logo_m"},"M")),n.default.createElement(o.Menu,{theme:i,openKeys:a,selectedKeys:t,onClick:this.onMenuItmClick,mode:"inline"},n.default.createElement(s,{key:"homeMenu",onTitleClick:this.onSubMenuClick,title:n.default.createElement("span",null,n.default.createElement(o.Icon,{type:"home"}),n.default.createElement("span",null,"主页"))},n.default.createElement(o.Menu.Item,{key:"/"},"主页")),l.map(function(e){return n.default.createElement(s,{key:e.keyProp,onTitleClick:this.onSubMenuClick,title:n.default.createElement("span",null,n.default.createElement(o.Icon,{type:e.icon}),n.default.createElement("span",null,e.menuName))},null==e.child?n.default.createElement("div",null):e.child.map(function(e){return n.default.createElement(o.Menu.Item,{key:e.keyProp},e.menuName)}.bind(this)))}.bind(this))))}});t.default=(0,l.withRouter)(d)},function(e,t){},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(4);a(32),a(2);var s=a(33),d=i(s),u=a(13),c=i(u),m=a(43),f=i(m),g=a(44),h=i(g),p=a(53),b=i(p),v=a(58),T=i(v),y=a(66),S=i(y),E=a(73),D=i(E),L=a(79),w=i(L),I=(l.Form.Item,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Sider,l.Menu.SubMenu,o.default.createClass({displayName:"Routes",getInitialState:function(){return{menuKeys:void 0}},componentDidMount:function(){this.registEvents()},updateMenuKeys:function(e){this.setState({menuKeys:e})},registEvents:function(){var e=this;window.eventEmitter.on("updateAdminMenuTree",function(t){var a=[];isEmptyList(t)||$.each(t,function(e,t){$.each(t.child,function(e,t){a.push(t.keyProp)})}),e.updateMenuKeys(a)})},render:function(){var e=this.state.menuKeys;return isUndefined(e)||e.contains(this.props.location.pathname)||window.EventsDispatcher.backToHomePage(),isUndefined(e)&&(e=[]),o.default.createElement("div",{style:{marginTop:35,padding:24,background:"#fff",minHeight:360}},o.default.createElement(r.Route,{exact:!0,path:"/",render:function(){return window.EventsDispatcher.onRouteEnter({pathname:"/"}),o.default.createElement(c.default,null)}}),e.contains("/user")?o.default.createElement(r.Route,{exact:!0,path:"/user",render:function(){return window.EventsDispatcher.onRouteEnter({pathname:"/user"}),o.default.createElement(d.default,null)}}):o.default.createElement("div",null),e.contains("/user/login/logs")?o.default.createElement(r.Route,{exact:!0,path:"/user/login/logs",render:function(){return window.EventsDispatcher.onRouteEnter({pathname:"/user/login/logs"}),o.default.createElement(f.default,null)}}):o.default.createElement("div",null),e.contains("/movie")?o.default.createElement(r.Route,{exact:!0,path:"/movie",render:function(){return window.EventsDispatcher.onRouteEnter({pathname:"/movie"}),o.default.createElement(h.default,null)}}):o.default.createElement("div",null),e.contains("/movie/filmmaker")?o.default.createElement(r.Route,{exact:!0,path:"/movie/filmmaker",render:function(){return window.EventsDispatcher.onRouteEnter({pathname:"/movie/filmmaker"}),o.default.createElement(b.default,null)}}):o.default.createElement("div",null),e.contains("/movie/tagGroup")?o.default.createElement(r.Route,{exact:!0,path:"/movie/tagGroup",render:function(){return window.EventsDispatcher.onRouteEnter({pathname:"/movie/tagGroup"}),o.default.createElement(T.default,null)}}):o.default.createElement("div",null),e.contains("/admin")?o.default.createElement(r.Route,{exact:!0,path:"/admin",render:function(){return window.EventsDispatcher.onRouteEnter({pathname:"/admin"}),o.default.createElement(S.default,null)}}):o.default.createElement("div",null),e.contains("/admin/login/logs")?o.default.createElement(r.Route,{exact:!0,path:"/admin/login/logs",render:function(){return window.EventsDispatcher.onRouteEnter({pathname:"/admin/login/logs"}),o.default.createElement(w.default,null)}}):o.default.createElement("div",null),e.contains("/admin/role")?o.default.createElement(r.Route,{exact:!0,path:"/admin/role",render:function(){return window.EventsDispatcher.onRouteEnter({pathname:"/admin/role"}),o.default.createElement(D.default,null)}}):o.default.createElement("div",null))}}));t.default=(0,r.withRouter)(I)},function(e,t){},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(4);a(9),a(2);var s=a(34),d=i(s),u=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Slider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea,o.default.createClass({displayName:"UserPage",getInitialState:function(){return{}},render:function(){return o.default.createElement("div",null,o.default.createElement(d.default,null))}}));t.default=(0,r.withRouter)(u)},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(4);a(35),a(2);var s=a(3),d=a(36),u=i(d),c=a(38),m=i(c),f=a(11),g=i(f),h=a(41),p=i(h),b=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Slider,l.Menu.SubMenu,l.Input.Search),v=(l.Input.TextArea,o.default.createClass({displayName:"UserTable",getInitialState:function(){return{userImgUploaderDialog:{title:"头像上传",config:{width:700,aspectRatio:1,fileTypes:["jpg","png"],fileMaxsize:2097152,saveImgUrl:"/user/img",uploadTempImgUrl:"/src/img",extraInfo:{}}},userEditDialog:{echoData:void 0},userTable:{title:"用户列表",dataSourceUrl:"/user/info/list",delUserUrl:"/user/info",scroll:{x:!0,y:450},editable:!1,haveSearchUsername:!1,usernameDropdownVisible:!1,bordered:!1,tableLoading:!1,batchDeleteBtnLoading:!1,refreshBtnLoading:!1,selectedRowKeys:[],data:[],originalData:[],page:{start:0,size:5,orderBy:"",orderType:"",total:0},query:{usernameQuery:""},columns:[],deletingTip:"正在删除"}}},onSearchUsername:function(e){this.updateUserTableUsernameQuery(e),isEmptyString(this.state.userTable.query.usernameQuery)?this.updateUserTableHaveSearchUsername(!1):this.updateUserTableHaveSearchUsername(!0),this.loadUserTableData()},updateUserTableHaveSearchUsername:function(e){var t=this.state;t.userTable.haveSearchUsername=e,this.setState(t)},updateUserTableUsernameDropdownVisible:function(e){var t=this.state;t.userTable.usernameDropdownVisible=e,this.setState(t)},updateUserTableSelectedRowKeys:function(e){var t=this.state;t.userTable.selectedRowKeys=e,this.setState(t)},removeUserTableSelectedRowKeys:function(e){var t=this.state.userTable.selectedRowKeys;t=t.removeByList(e),this.updateUserTableSelectedRowKeys(t)},updateUserTableUsernameQuery:function(e){var t=this.state;t.userTable.query.usernameQuery=e,this.setState(t)},updateUserTableData:function(e){var t=this.state;t.userTable.data=e,this.setState(t)},updateUserTableBatchDeleteLoading:function(e){var t=this.state;t.userTable.batchDeleteBtnLoading=e,this.setState(t)},updateUserTableRefreshBtnLoading:function(e){var t=this.state;t.userTable.refreshBtnLoading=e,this.setState(t)},updateUserTablePage:function(e){var t=this.state;t.userTable.page=e,this.setState(t)},updateUserTableQuery:function(e){var t=this.state;t.userTable.query=e,this.setState(t)},updateUserTableLoading:function(e){var t=this.state;t.userTable.tableLoading=e,this.setState(t)},updateUserTableColumns:function(e){var t=this.state;t.userTable.columns=e,this.setState(t)},updateUserTableOriginalData:function(e){var t=this.state;t.userTable.originalData=e,this.setState(t)},updateUserEditDialogEchoData:function(e){var t=this.state;t.userEditDialog.echoData=e,this.setState(t)},getUserImgUploaderDialog:function(){return this.refs.user_img_uploader_dialog},showUserImgUploaderDialog:function(e){this.getUserImgUploaderDialog().showDialog(),this.getUserImgUploaderDialog().previewImg(s.commons.generateImgUrl({imgUrl:e.imgUrl,width:300})),this.getUserImgUploaderDialog().updateExtraInfo(e)},componentDidMount:function(){var e=this;this.updateUserTableColumns([{title:"id",width:100,dataIndex:"id",sorter:!0},{title:"头像",width:100,dataIndex:"imgUrl",render:function(t,a){var i=s.commons.generateImgUrl({imgUrl:t,width:50});return o.default.createElement("img",{onClick:function(){return e.showUserImgUploaderDialog(a)},style:{width:50,height:50,cursor:"pointer"},src:i,alt:"暂无"})}},{title:"用户名",width:150,dataIndex:"username",render:function(t,a){return s.commons.highLight(t,e.state.userTable.query.usernameQuery)},sorter:!0,filterDropdown:o.default.createElement("div",{className:"custom-filter-dropdown"},o.default.createElement(b,{placeholder:"搜索用户名",onSearch:this.onSearchUsername,style:{width:200}})),filterIcon:o.default.createElement(l.Icon,{type:"search",style:{color:this.state.userTable.haveSearchUsername?"#108ee9":"#aaa"}})},{title:"性别",width:100,dataIndex:"sex",render:function(e){return s.commons.getSexStrByIndex({index:e})},sorter:!0},{title:"密码",width:100,dataIndex:"password",sorter:!0},{title:"生日",width:100,dataIndex:"birthday",render:function(e){return timeFormatter.formatDate(timeFormatter.int2Long(e))},sorter:!0},{title:"创建时间",width:150,dataIndex:"create_time",render:function(e){return timeFormatter.formatTime(timeFormatter.int2Long(e))},sorter:!0},{title:"最后更新时间",width:150,dataIndex:"update_time",render:function(e){return timeFormatter.formatTime(timeFormatter.int2Long(e))},sorter:!0},{title:"状态",width:100,dataIndex:"status",render:function(e){return s.commons.getStatusStrByIndex({index:e})},sorter:!0},{title:"操作",dataIndex:"operation",width:150,render:function(t,a){var i=o.default.createElement(l.Menu,null,o.default.createElement(l.Menu.Item,null,o.default.createElement("a",{onClick:function(){return e.showUserLoginLogsDialog(a.id)},href:"javascript:void(0);"},"查看登录日志")),o.default.createElement(l.Menu.Item,null,o.default.createElement("a",{onClick:function(){return e.showEditDialog(a)},href:"javascript:void(0);"},"编辑")),o.default.createElement(l.Menu.Item,null,o.default.createElement(l.Popconfirm,{title:"确认删除 ? ",okText:"删除",cancelText:"取消",onConfirm:function(){return e.deleteRecord([a.id])}},o.default.createElement("a",{href:"javascript:void(0)"},"删除"))));return o.default.createElement("div",null,o.default.createElement(l.Dropdown,{overlay:i},o.default.createElement("a",{href:"javascript:void(0);"},"操作 ",o.default.createElement(l.Icon,{type:"down"}))))},sorter:!0}]),this.loadUserTableData()},handleTableChange:function(e,t,a){var i=this.state.userTable.page,n=e.pageSize,o=(e.current-1)*n,l=isUndefined(a.field)?"":a.field,r=isUndefined(a.order)?"":a.order;this.updateUserTablePage({start:o,size:n,orderBy:l,orderType:r,total:i.total}),this.loadUserTableData()},userTableDataFiledsConverter:function(e){var t=[];return $.each(e,function(e,a){t.push({key:a.id,id:a.id,imgUrl:a.imgUrl,username:a.username,sex:a.sex,password:a.password,description:a.description,birthday:a.birthday,create_time:a.createTime,update_time:a.updateTime,status:a.status})}.bind(this)),t},loadUserTableData:function(){this.updateUserTableLoading(!0),this.updateUserTableRefreshBtnLoading(!0);var e=this.state.userTable,t=e.page,a=e.query,i=t.orderType;"descend"==i&&(i="desc"),"ascend"==i&&(i="asc"),t.orderType=i,s.ajax.get({url:this.state.userTable.dataSourceUrl,data:$.extend(t,a),success:function(e){var t=e.data.list,a=this.userTableDataFiledsConverter(t);this.updateUserTableOriginalData(t),this.updateUserTableData(a);var i=this.state.userTable.page;this.updateUserTablePage({start:i.start,size:i.size,orderBy:i.orderBy,orderType:i.orderType,total:e.data.total})}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),error:function(){}.bind(this),complete:function(){this.updateUserTableLoading(!1),this.updateUserTableRefreshBtnLoading(!1)}.bind(this)})},showEditDialog:function(e){e=s.commons.getObjByKey(this.state.userTable.originalData,"id",e.id),this.updateUserEditDialogEchoData(e),this.getUserEditDialog().showDialog()},deleteRecord:function(e){var t=l.message.loading(i);this.updateUserTableBatchDeleteLoading(!0);var a=this.state.userTable,i=a.deletingTip,n=a.delUserUrl;s.ajax.delete({url:n,data:{deletedIds:e.join(",")},complete:function(){t(),this.updateUserTableBatchDeleteLoading(!1)}.bind(this),success:function(t){l.message.success(t.msg),this.removeUserTableSelectedRowKeys(e),this.loadUserTableData()}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),error:function(){}})},showAddDialog:function(){this.getUserAddDialog().showDialog()},getUserAddDialog:function(){return this.refs.user_add_dialog},getUserEditDialog:function(){return this.refs.user_edit_dialog},onEditSuccess:function(e){var t=s.commons.updateObjByKey(this.state.userTable.originalData,"id",e.id,e);this.updateUserTableOriginalData(t);var a=this.userTableDataFiledsConverter(t);this.updateUserTableData(a)},onAddSuccess:function(e){this.loadUserTableData()},onUpdateImgSuccess:function(e){this.onEditSuccess(e.data.user)},onUploadTempImgSuccess:function(e){this.getUserImgUploaderDialog().previewImg(vm_config.http_url_prefix+e.data.imgUrl)},getUserLoginLogsDialog:function(){return this.refs.user_login_logs_dialog},showUserLoginLogsDialog:function(e){this.getUserLoginLogsDialog().showDialog(e)},expandedRowRender:function(e){return o.default.createElement("span",null,"简介 ：",o.default.createElement("p",{style:{margin:0}},e.description))},render:function(){var e=this,t=this.state.userEditDialog.echoData,a=this.state.userTable,i=a.scroll,n=a.selectedRowKeys,r=a.columns,s=a.data,d=a.page,c=a.tableLoading,f=a.batchDeleteBtnLoading,h=a.refreshBtnLoading,b=a.bordered,v=this.state.userImgUploaderDialog,T=v.config,y=v.title,S=v.width,E={onChange:function(t,a){e.updateUserTableSelectedRowKeys(t)},onSelect:function(e,t,a){},onSelectAll:function(e,t,a){}},D=n.length>0;return o.default.createElement("div",null,o.default.createElement("div",{style:{marginBottom:16}},o.default.createElement(l.Button,{loading:h,onClick:this.loadUserTableData},"刷新"),o.default.createElement(l.Button,{style:{marginLeft:8},type:"primary",onClick:this.showAddDialog},"添加"),o.default.createElement(l.Popconfirm,{title:"确认删除 ? ",okText:"删除",cancelText:"取消",onConfirm:function(){return e.deleteRecord(n)}},o.default.createElement(l.Button,{style:{marginLeft:8},type:"danger",disabled:!D,loading:f},"批量删除")),o.default.createElement("span",{style:{marginLeft:8}},D?"选择了 "+n.length+" 个选项":"")),o.default.createElement(l.Table,{locale:{emptyText:"暂无用户数据"},columns:r,rowSelection:E,expandedRowRender:this.expandedRowRender,dataSource:s,pagination:{total:d.total,showTotal:function(e,t){return"第 "+t[0]+"-"+t[1]+" 条记录 , 共 "+e+" 条记录"},pageSize:d.size,defaultCurrent:1},loading:c,onChange:this.handleTableChange,bordered:b,title:function(){return e.state.userTable.title},scroll:i}),o.default.createElement(u.default,{ref:"user_edit_dialog",echoData:t,onEditSuccess:this.onEditSuccess}),o.default.createElement(m.default,{ref:"user_add_dialog",onAddSuccess:this.onAddSuccess}),o.default.createElement(g.default,{config:T,width:S,title:y,ref:"user_img_uploader_dialog",onUpdateImgSuccess:this.onUpdateImgSuccess,onUploadTempImgSuccess:this.onUploadTempImgSuccess}),o.default.createElement(p.default,{ref:"user_login_logs_dialog"}))}}));t.default=(0,r.withRouter)(v)},function(e,t){},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(6),s=i(r);a(9),a(2);var d=a(3),u=a(5),c=i(u),m=l.Select.Option,f=(l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Sider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea),g=o.default.createClass({displayName:"UserEditDialog",getInitialState:function(){return{title:"修改用户信息",editUserUrl:"/user/info",tipOfEditing:"正在修改用户"}},showDialog:function(){this.getUserEditDialog().showDialog()},getUserEditDialog:function(){return this.refs.user_edit_dialog},handleSubmit:function(e){var t=this.state,a=t.editUserUrl,i=t.tipOfEditing,n=l.message.loading(i,0);e=function(e){return e.birthday=timeFormatter.long2Int(new Date(e.birthday._d).getTime()),e}(e),d.ajax.put({url:a,data:e,success:function(e){var t=this.props.onEditSuccess;l.message.success(e.msg),this.getUserEditDialog().closeDialog(),isUndefined(t)||t(e.data.user),this.getUserEditDialog().clearForm()}.bind(this),failure:function(e){l.message.error(e.msg)},complete:function(){n(),this.getUserEditDialog().formLeaveLoading()}.bind(this)})},handleCancel:function(){this.getUserEditDialog().clearForm()},componentDidMount:function(){},render:function(){var e=this.props.echoData,t=this.state.title;e=d.commons.clone(e);e=function(e){return isUndefined(e)?{}:(isUndefined(e.birthday)||(e.birthday=(0,s.default)(timeFormatter.int2Long(e.birthday))),isUndefined(e.createTime)||(e.createTime=timeFormatter.formatDate(timeFormatter.int2Long(e.createTime))),isUndefined(e.updateTime)||(e.updateTime=timeFormatter.formatDate(timeFormatter.int2Long(e.updateTime))),e)}(e);var a=[{cols:[{col:{span:11},label:"id",id:"id",config:{initialValue:e.id},input:o.default.createElement(l.Input,{name:"id",autoComplete:"off",disabled:!0})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"生日",id:"birthday",config:{initialValue:e.birthday,rules:[{type:"object",required:!0,message:"请输入你的生日!"}]},input:o.default.createElement(l.DatePicker,{placeholder:"请输入生日",name:"birthday"})}]},{cols:[{col:{span:11},label:"状态",id:"status",config:{initialValue:e.status,rules:[{required:!0,message:"请输入状态!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入状态"},o.default.createElement(m,{value:"1"},"正常"),o.default.createElement(m,{value:"2"},"冻结"))},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"用户名",id:"username",config:{initialValue:e.username,rules:[{required:!0,whitespace:!0,message:"请输入用户名!"}]},input:o.default.createElement(l.Input,{autoComplete:"off",placeholder:"用户名"})}]},{cols:[{col:{span:11},label:"密码",id:"password",config:{initialValue:e.password,rules:[{required:!0,whitespace:!0,message:"请输入密码!"}]},input:o.default.createElement(l.Input,{autoComplete:"off",placeholder:"密码"})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"性别",id:"sex",config:{initialValue:e.sex,rules:[{required:!0,message:"请输入你的性别!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入你的性别"},d.commons.getSexOptions())}]},{cols:[{col:{span:11},label:"创建时间",id:"ignore_createTime",config:{initialValue:e.createTime},input:o.default.createElement(l.Input,{disabled:!0})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"最后更新时间",id:"ignore_updateTime",config:{initialValue:e.updateTime},input:o.default.createElement(l.Input,{disabled:!0})}]},{cols:[{col:{span:24},label:"简介",id:"description",config:{initialValue:e.description,rules:[{required:!0,message:"请输入简介!"}]},input:o.default.createElement(f,{placeholder:"请输入简介",autosize:{minRows:4,maxRows:8}})}]}];return o.default.createElement(c.default,{title:t,formRows:a,formLayout:"horizontal",handleSubmit:this.handleSubmit,handleCancel:this.handleCancel,ref:"user_edit_dialog"})}});t.default=g},function(e,t){e.exports=vendors_lib},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1);a(9),a(2);var r=a(3),s=a(5),d=i(s),u=l.Select.Option,c=(l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Sider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea),m=o.default.createClass({displayName:"UserAddDialog",getInitialState:function(){return{title:"添加用户",addUserUrl:"/user/info"}},showDialog:function(){this.getUserAddDialog().showDialog()},getUserAddDialog:function(){return this.refs.user_add_dialog},handleSubmit:function(e){var t=l.message.loading("正在添加用户",0),a=this.state.addUserUrl;e=function(e){return e.birthday=timeFormatter.long2Int(new Date(e.birthday._d).getTime()),e}(e),r.ajax.post({url:a,data:e,success:function(e){var t=this.props.onAddSuccess;l.message.success(e.msg),this.getUserAddDialog().closeDialog(),isUndefined(t)||t(e.data.user),this.getUserAddDialog().clearForm()}.bind(this),failure:function(e){l.message.error(e.msg)},complete:function(){t(),this.getUserAddDialog().formLeaveLoading()}.bind(this)})},handleCancel:function(){},componentDidMount:function(){},render:function(){var e=this.state.title,t=[{cols:[{col:{span:11},label:"用户名",id:"username",config:{rules:[{required:!0,whitespace:!0,message:"请输入用户名!"}]},input:o.default.createElement(l.Input,{autoComplete:"off",placeholder:"用户名"})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"密码",id:"password",config:{rules:[{required:!0,whitespace:!0,message:"请输入密码!"}]},input:o.default.createElement(l.Input,{autoComplete:"off",placeholder:"密码"})}]},{cols:[{col:{span:11},label:"用户名",id:"birthday",config:{rules:[{type:"object",required:!0,message:"请输入你的生日!"}]},input:o.default.createElement(l.DatePicker,{placeholder:"请输入生日"})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"性别",id:"sex",config:{rules:[{required:!0,message:"请输入你的性别!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入你的性别"},r.commons.getSexOptions())}]},{cols:[{label:"简介",id:"description",config:{rules:[{required:!0,message:"请输入简介!"}]},input:o.default.createElement(c,{placeholder:"请输入简介",autosize:{minRows:4,maxRows:8}})}]},{cols:[{label:"状态",id:"status",config:{rules:[{required:!0,message:"请输入状态!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入状态"},o.default.createElement(u,{value:"1"},"正常"),o.default.createElement(u,{value:"2"},"冻结"))}]}];return o.default.createElement(d.default,{title:e,formRows:t,handleSubmit:this.handleSubmit,handleCancel:this.handleCancel,ref:"user_add_dialog"})}});t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),n=function(e){return e&&e.__esModule?e:{default:e}}(i);a(40);var o=a(3),l=a(1),r=n.default.createClass({displayName:"ImgUpload",getInitialState:function(){var e=this.props.config;return{config:e,uploadTempImgTip:"正在读取图片",saveImgTip:"正在保存图片",imgFileTooMax:"文件过大,最大允许 : "+e.fileMaxsize/1024+" kb",imgFileExtError:"文件类型错误,允许的文件类型 : "+e.fileTypes,imgFileIsEmpty:"请选择一个文件",imgUpdateSuccess:" 图片更新成功",willUpdatedImgInfo:{fileId:void 0},$imgPreview:void 0}},componentDidMount:function(){},validateImgFileOnSubmit:function(){if(isUndefined(this.state.willUpdatedImgInfo.fileId))throw this.state.imgFileIsEmpty},validateImgFileOnChoice:function(e){if(isUndefined(e)||isUndefined(e.size))throw this.state.imgFileIsEmpty;if(e.size>this.state.config.fileMaxsize)throw this.state.imgFileTooMax;var t=getFileNameExt(e.name);if(!this.state.config.fileTypes.contains(t))throw this.state.imgFileExtError},getImgInput:function(){return $(this.refs.imgInput)},getImgFile:function(){return this.getImgInput().get(0).files[0]},updateStateImgPreview:function(e){var t=this.state;t.$imgPreview=e,this.setState(t)},previewImg:function(e){var t=function(e){var t=this.state.willUpdatedImgInfo;t.x=Math.round(e.x),t.y=Math.round(e.y),t.height=Math.round(e.height),t.width=Math.round(e.width),t.rotate=Math.round(e.rotate),t.scaleX=Math.round(e.scaleX),t.scaleY=Math.round(e.scaleY);var a=this.state;return a.willUpdatedImgInfo=t,this.setState(a),t}.bind(this),a=this.state.config.aspectRatio;a=isUndefined(a)?1:a;var i=$(".preview"),n={aspectRatio:a,viewMode:2,ready:function(e){var t=$(this).clone().removeClass("cropper-hidden");t.css({display:"block",width:"100%",minWidth:0,minHeight:0,maxWidth:"none",maxHeight:"none"}),i.css({width:"100%",overflow:"hidden"}).html(t)},cropstart:function(e){},cropmove:function(e){},cropend:function(e){},crop:function(e){t(e);var a=$(this).cropper("getImageData"),n=e.width/e.height;i.each(function(){var t=$(this),i=t.width(),o=i/n,l=e.width/i;t.height(o).find("img").css({width:a.naturalWidth/l,height:a.naturalHeight/l,marginLeft:-e.x/l,marginTop:-e.y/l})})},zoom:function(e){e.type,e.ratio}};if(isUndefined(this.state.$imgPreview)){var o=$(this.refs.imgPreview);o.cropper(n),this.updateStateImgPreview(o)}this.state.$imgPreview.cropper("replace",e)},uploadTempImg:function(e){var t=(this.getImgInput(),this.getImgFile());try{this.validateImgFileOnChoice(t)}catch(e){return void l.message.error(e)}var a=l.message.loading(this.state.uploadTempImgTip),i=new FormData;i.append("file",t);var n=this.state.config.uploadTempImgUrl;o.ajax.post({url:n,data:i,enctype:"multipart/form-data",contentType:!1,processData:!1,beforeSend:function(){}.bind(this),success:function(e){this.updateTempFileId(e.data.fileId),this.props.onUploadTempImgSuccess(e)}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),complete:function(){void 0!=e&&e(),a()}.bind(this)})},updateTempFileId:function(e){var t=this.state;t.willUpdatedImgInfo.fileId=e,this.setState(t)},clearSelectFileInfo:function(){this.updateTempFileId(void 0),this.clearImgInput()},clearImgInput:function(){this.getImgInput().val("")},saveImg:function(e){try{this.validateImgFileOnSubmit()}catch(e){return void l.message.error(e)}var t=l.message.loading(this.state.saveImgTip),a=this.state.config.saveImgUrl,i=this.state.willUpdatedImgInfo;i=$.extend(i,this.state.config.extraInfo),o.ajax.put({url:a,data:i,beforeSend:function(){}.bind(this),complete:function(){void 0!=e&&e(),t()}.bind(this),success:function(e){l.message.success(e.msg),this.props.onUpdateImgSuccess(e),this.clearSelectFileInfo()}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this)})},render:function(){var e=this,t=this.state.config,a=t.fileTypes,i=t.fileMaxsize;return n.default.createElement("div",{id:"img_uploader",className:"clearfix"},n.default.createElement("div",{id:"img_upload"},n.default.createElement("div",{id:"img_upload_to_middle_div"},n.default.createElement("div",{id:"imgPreviewWrapper",ref:"imgPreviewWrapper"},n.default.createElement("img",{src:"",id:"imgPreview",ref:"imgPreview"})),n.default.createElement("div",null,"图片限制:允许格式：",a.join(",")," ；允许最大图片：",i/1024/1024," m"),n.default.createElement("div",{id:"btns_div"},n.default.createElement("input",{type:"file",ref:"imgInput",name:"img",id:"imgInput",onChange:function(){e.uploadTempImg()}}),n.default.createElement("input",{type:"button",className:"operateBtn",id:"uploadTempImgBtn",value:"选择图片",onClick:function(){e.refs.imgInput.click()}}),n.default.createElement("input",{type:"button",className:"operateBtn",id:"imgSaveBtn",ref:"imgSaveBtn",onClick:function(){e.saveImg()},value:"保存"})))),n.default.createElement("div",{id:"head_preview"},n.default.createElement("p",null,"预览 : "),n.default.createElement("div",{id:"imgPreview0"},n.default.createElement("div",{className:"preview"}))))}});t.default=r},function(e,t){},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(7),o=(i(n),a(0)),l=i(o),r=a(1);a(4);a(2);var s=a(16),d=i(s),u=l.default.createClass({displayName:"UserLoginLogsDialog",getInitialState:function(){return{visible:!1,title:"用户登录日志",width:1111}},showDialog:function(e){this.setState({visible:!0}),setTimeout(function(){this.getUserLoginLogsTable().loadDataByUserId(e)}.bind(this),10)},handleCancel:function(){this.setState({visible:!1})},getUserLoginLogsTable:function(){return this.refs.user_login_logs_table},render:function(){var e=this.state,t=e.visible,a=e.title,i=e.width;return l.default.createElement(r.Modal,{id:"user_login_logs_dialog",visible:t,title:a,width:i,onCancel:this.handleCancel,footer:null},l.default.createElement(d.default,{ref:"user_login_logs_table"}))}});t.default=u},function(e,t){},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(6),s=(i(r),a(4));a(9),a(2);var d=(a(3),a(5)),u=(i(d),a(16)),c=i(u),m=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Slider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea,o.default.createClass({displayName:"UserLoginLogsPage",getInitialState:function(){return{}},componentDidMount:function(){this.getUserLoginLogsTable().loadUserLoginLogsTableData()},getUserLoginLogsTable:function(){return this.refs.user_login_logs_table},render:function(){return o.default.createElement("div",null,o.default.createElement(c.default,{ref:"user_login_logs_table"}))}}));t.default=(0,s.withRouter)(m)},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(4);a(8),a(2);var s=a(45),d=i(s),u=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Slider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea,o.default.createClass({displayName:"MoviePage",getInitialState:function(){return{}},render:function(){return o.default.createElement("div",null,o.default.createElement(d.default,null))}}));t.default=(0,r.withRouter)(u)},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(4);a(46),a(2);var s=a(3),d=a(47),u=i(d),c=a(48),m=i(c),f=a(11),g=i(f),h=a(49),p=i(h),b=a(51),v=i(b),T=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Slider,l.Menu.SubMenu,l.Input.Search),y=(l.Input.TextArea,o.default.createClass({displayName:"MovieTable",getInitialState:function(){return{posterUploaderDialog:{title:"更新电影封面",width:700,config:{aspectRatio:1.5,fileTypes:["jpg","png"],fileMaxsize:1048576,saveImgUrl:"/movie/poster",uploadTempImgUrl:"/src/img",server_url_prefix:vm_config.http_url_prefix,extraInfo:{}}},imgUploaderDialog:{title:"更新电影图片",width:700,config:{aspectRatio:1/1.5,fileTypes:["jpg","png"],fileMaxsize:1048576,saveImgUrl:"/movie/img",uploadTempImgUrl:"/src/img",server_url_prefix:vm_config.http_url_prefix,extraInfo:{}}},movieEditDialog:{echoData:void 0},movieTable:{title:"电影列表",scroll:{x:!0,y:450},dataSourceUrl:"/movie/info/list",delMovieUrl:"/movie/info",editable:!1,haveSearchMoviename:!1,movienameDropdownVisible:!1,bordered:!1,tableLoading:!1,batchDeleteBtnLoading:!1,refreshBtnLoading:!1,selectedRowKeys:[],data:[],originalData:[],page:{start:0,size:5,orderBy:"",orderType:"",total:0},query:{name:""},columns:[],deletingTip:"正在删除"}}},onSearchMoviename:function(e){this.updateNameOfQuery(e),isEmptyString(this.state.movieTable.query.name)?this.updateMovieTableHaveSearchMoviename(!1):this.updateMovieTableHaveSearchMoviename(!0),this.loadMovieTableData()},updateMovieTableHaveSearchMoviename:function(e){var t=this.state;t.movieTable.haveSearchMoviename=e,this.setState(t)},updateMovieTableMovienameDropdownVisible:function(e){var t=this.state;t.movieTable.movienameDropdownVisible=e,this.setState(t)},updateMovieTableSelectedRowKeys:function(e){var t=this.state;t.movieTable.selectedRowKeys=e,this.setState(t)},removeMovieTableSelectedRowKeys:function(e){var t=this.state.movieTable.selectedRowKeys;t=t.removeByList(e),this.updateMovieTableSelectedRowKeys(t)},updateNameOfQuery:function(e){var t=this.state;t.movieTable.query.name=e,this.setState(t)},updateMovieTableData:function(e){var t=this.state;t.movieTable.data=e,this.setState(t)},updateMovieTableBatchDeleteLoading:function(e){var t=this.state;t.movieTable.batchDeleteBtnLoading=e,this.setState(t)},updateMovieTableRefreshBtnLoading:function(e){var t=this.state;t.movieTable.refreshBtnLoading=e,this.setState(t)},updateMovieTablePage:function(e){var t=this.state;t.movieTable.page=e,this.setState(t)},updateMovieTableQuery:function(e){var t=this.state;t.movieTable.query=e,this.setState(t)},updateMovieTableLoading:function(e){var t=this.state;t.movieTable.tableLoading=e,this.setState(t)},updateMovieTableColumns:function(e){var t=this.state;t.movieTable.columns=e,this.setState(t)},updateMovieTableOriginalData:function(e){var t=this.state;t.movieTable.originalData=e,this.setState(t)},updateMovieEditDialogEchoData:function(e){var t=this.state;t.movieEditDialog.echoData=e,this.setState(t)},showMovieImgUploaderDialog:function(e){this.getMovieImgUploaderDialog().showDialog(),this.getMovieImgUploaderDialog().previewImg(s.commons.generateImgUrl({imgUrl:e.imgUrl,width:300})),this.getMovieImgUploaderDialog().updateExtraInfo(e)},showMoviePosterUploaderDialog:function(e){this.getMoviePosterUploaderDialog().showDialog(),this.getMoviePosterUploaderDialog().previewImg(s.commons.generateImgUrl({imgUrl:e.posterUrl,width:600})),this.getMoviePosterUploaderDialog().updateExtraInfo(e)},componentDidMount:function(){var e=this;this.updateMovieTableColumns([{title:"id",width:100,dataIndex:"id",sorter:!0},{title:"图片",width:90,dataIndex:"imgUrl",render:function(t,a){var i=s.commons.generateImgUrl({imgUrl:t,width:50});return o.default.createElement("img",{onClick:function(){return e.showMovieImgUploaderDialog(a)},style:{width:50,height:75,cursor:"pointer"},src:i,alt:"暂无"})}},{title:"播放封面",width:120,dataIndex:"posterUrl",render:function(t,a){var i=s.commons.generateImgUrl({imgUrl:t,width:80});return o.default.createElement("img",{onClick:function(){return e.showMoviePosterUploaderDialog(a)},style:{width:80,height:53,cursor:"pointer"},src:i,alt:"暂无"})}},{title:"电影名",width:120,dataIndex:"name",render:function(t,a){return s.commons.highLight(t,e.state.movieTable.query.name)},sorter:!0,filterDropdown:o.default.createElement("div",{className:"custom-filter-dropdown"},o.default.createElement(T,{placeholder:"搜索电影名",onSearch:this.onSearchMoviename,style:{width:200}})),filterIcon:o.default.createElement(l.Icon,{type:"search",style:{color:this.state.movieTable.haveSearchMoviename?"#108ee9":"#aaa"}})},{title:"别名",width:100,dataIndex:"alias",sorter:!0},{title:"发布时间",width:100,dataIndex:"release_time",render:function(e){return timeFormatter.formatTime(timeFormatter.int2Long(e))},sorter:!0},{title:"评分",width:80,dataIndex:"score",sorter:!0},{title:"观看数",width:80,dataIndex:"watch_num",sorter:!0},{title:"时长",width:80,dataIndex:"movie_time",render:function(e){return e+" 分钟"},sorter:!0},{title:"状态",width:80,dataIndex:"status",render:function(e){return s.commons.getStatusStrByIndex({index:e})},sorter:!0},{title:"更新时间",width:100,dataIndex:"update_time",render:function(e){return timeFormatter.formatTime(timeFormatter.int2Long(e))},sorter:!0},{title:"创建时间",width:100,dataIndex:"create_time",render:function(e){return timeFormatter.formatTime(timeFormatter.int2Long(e))},sorter:!0},{title:"操作",dataIndex:"operation",width:100,render:function(t,a){var i=o.default.createElement(l.Menu,null,o.default.createElement(l.Menu.Item,null,o.default.createElement("a",{onClick:function(){return e.showMovieVideoUploadDialog(a)},href:"javascript:void(0);"},"上传资源")),o.default.createElement(l.Menu.Item,null,o.default.createElement("a",{onClick:function(){return e.showEditDialog(a)},href:"javascript:void(0);"},"编辑")),o.default.createElement(l.Menu.Item,null,o.default.createElement(l.Popconfirm,{title:"确认删除 ? ",okText:"删除",cancelText:"取消",onConfirm:function(){return e.deleteRecord([a.id])}},o.default.createElement("a",{href:"javascript:void(0)"},"删除"))));return o.default.createElement("div",null,o.default.createElement(l.Dropdown,{overlay:i},o.default.createElement("a",{href:"javascript:void(0);"},"操作 ",o.default.createElement(l.Icon,{type:"down"}))))},sorter:!0}]),this.loadMovieTableData()},uploadMovieSrc:function(e){},handleTableChange:function(e,t,a){var i=this.state.movieTable.page,n=e.pageSize,o=(e.current-1)*n,l=isUndefined(a.field)?"":a.field,r=isUndefined(a.order)?"":a.order;this.updateMovieTablePage({start:o,size:n,orderBy:l,orderType:r,total:i.total}),this.loadMovieTableData()},movieTableDataFiledsConverter:function(e){var t=[];return $.each(e,function(e,a){t.push({key:a.id,id:a.id,imgUrl:a.imgUrl,posterUrl:a.posterUrl,name:a.name,alias:a.alias,description:a.description,director_id:a.directorId,release_time:a.releaseTime,score:a.score,watch_num:a.watchNum,movie_time:a.movieTime,create_time:a.createTime,update_time:a.updateTime,status:a.status})}.bind(this)),t},loadMovieTableData:function(){this.updateMovieTableLoading(!0),this.updateMovieTableRefreshBtnLoading(!0);var e=this.state.movieTable,t=e.page,a=e.query,i=t.orderType;"descend"==i&&(i="desc"),"ascend"==i&&(i="asc"),t.orderType=i,s.ajax.get({url:this.state.movieTable.dataSourceUrl,data:$.extend(t,a),success:function(e){var t=e.data.list,a=this.movieTableDataFiledsConverter(t);this.updateMovieTableOriginalData(t),this.updateMovieTableData(a);var i=this.state.movieTable.page;this.updateMovieTablePage({start:i.start,size:i.size,orderBy:i.orderBy,orderType:i.orderType,total:e.data.total})}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),error:function(){}.bind(this),complete:function(){this.updateMovieTableLoading(!1),this.updateMovieTableRefreshBtnLoading(!1)}.bind(this)})},showEditDialog:function(e){e=s.commons.getObjByKey(this.state.movieTable.originalData,"id",e.id),this.updateMovieEditDialogEchoData(e),this.getMovieEditDialog().showDialog(e)},deleteRecord:function(e){var t=l.message.loading(i);this.updateMovieTableBatchDeleteLoading(!0);var a=this.state.movieTable,i=a.deletingTip,n=a.delMovieUrl;s.ajax.delete({url:n,data:{deletedIds:e.join(",")},complete:function(){t(),this.updateMovieTableBatchDeleteLoading(!1)}.bind(this),success:function(t){l.message.success(t.msg),this.removeMovieTableSelectedRowKeys(e),this.loadMovieTableData()}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),error:function(){}})},showAddDialog:function(){this.getMovieAddDialog().showDialog()},getMovieAddDialog:function(){return this.refs.movie_add_dialog},getMovieEditDialog:function(){return this.refs.movie_edit_dialog},onEditSuccess:function(e){var t=s.commons.updateObjByKey(this.state.movieTable.originalData,"id",e.id,e);this.updateMovieTableOriginalData(t);var a=this.movieTableDataFiledsConverter(t);this.updateMovieTableData(a)},onAddSuccess:function(e){this.loadMovieTableData()},getMovieImgUploaderDialog:function(){return this.refs.movie_img_uploader_dialog},onUpdateImgSuccess:function(e){this.onEditSuccess(e.data.movie)},onUploadTempImgSuccess:function(e){this.getMovieImgUploaderDialog().previewImg(vm_config.http_url_prefix+e.data.imgUrl)},getMoviePosterUploaderDialog:function(){return this.refs.movie_poster_uploader_dialog},onUpdatePosterSuccess:function(e){this.onEditSuccess(e.data.movie)},onUploadTempPosterSuccess:function(e){this.getMoviePosterUploaderDialog().previewImg(vm_config.http_url_prefix+e.data.imgUrl)},expandedRowRender:function(e){return o.default.createElement("span",null,"简介 ：",o.default.createElement("p",{style:{margin:0}},e.description),o.default.createElement(v.default,{movieId:e.id}))},getMovieVideoUploadDialog:function(){return this.refs.movie_video_upload_dialog},showMovieVideoUploadDialog:function(e){this.getMovieVideoUploadDialog().showDialog(e)},onMovieSrcVersionAddSuccess:function(e){window.EventsDispatcher.onMovieSrcVersionAddSuccess(e)},render:function(){var e=this,t=this.state.movieEditDialog.echoData,a=this.state.movieTable,i=a.title,n=a.scroll,r=a.selectedRowKeys,s=a.columns,d=a.data,c=a.page,f=a.tableLoading,h=a.batchDeleteBtnLoading,b=a.refreshBtnLoading,v=a.bordered,T={onChange:function(t,a){e.updateMovieTableSelectedRowKeys(t)},onSelect:function(e,t,a){},onSelectAll:function(e,t,a){}},y=this.state.posterUploaderDialog,S=this.state.imgUploaderDialog,E=r.length>0;return o.default.createElement("div",null,o.default.createElement("div",{style:{marginBottom:16}},o.default.createElement(l.Button,{loading:b,onClick:function(){e.loadMovieTableData(),window.EventsDispatcher.loadMovieSrcVersionTableData()}},"刷新"),o.default.createElement(l.Button,{style:{marginLeft:8},type:"primary",onClick:this.showAddDialog},"添加"),o.default.createElement(l.Popconfirm,{title:"确认删除 ? ",okText:"删除",cancelText:"取消",onConfirm:function(){return e.deleteRecord(r)}},o.default.createElement(l.Button,{style:{marginLeft:8},type:"danger",disabled:!E,loading:h},"批量删除")),o.default.createElement("span",{style:{marginLeft:8}},E?"选择了 "+r.length+" 个选项":"")),o.default.createElement(l.Table,{locale:{emptyText:"暂无相关电影数据"},columns:s,expandedRowRender:this.expandedRowRender,rowSelection:T,dataSource:d,pagination:{total:c.total,showTotal:function(e,t){return"第 "+t[0]+"-"+t[1]+" 条记录 , 共 "+e+" 条记录"},pageSize:c.size,defaultCurrent:1},loading:f,onChange:this.handleTableChange,bordered:v,title:function(){return i},scroll:n}),o.default.createElement(u.default,{ref:"movie_edit_dialog",echoData:t,onEditSuccess:this.onEditSuccess}),o.default.createElement(m.default,{ref:"movie_add_dialog",onAddSuccess:this.onAddSuccess}),o.default.createElement(g.default,{ref:"movie_img_uploader_dialog",config:S.config,title:S.title,width:S.width,onUpdateImgSuccess:this.onUpdateImgSuccess,onUploadTempImgSuccess:this.onUploadTempImgSuccess}),o.default.createElement(g.default,{ref:"movie_poster_uploader_dialog",config:y.config,title:y.title,width:y.width,onUpdateImgSuccess:this.onUpdatePosterSuccess,onUploadTempImgSuccess:this.onUploadTempPosterSuccess}),o.default.createElement(p.default,{onMovieSrcVersionAddSuccess:this.onMovieSrcVersionAddSuccess,ref:"movie_video_upload_dialog"}))}}));t.default=(0,r.withRouter)(y)},function(e,t){},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(6),s=i(r);a(4);a(8),a(2);var d=a(3),u=a(5),c=i(u),m=l.Select.Option,f=l.Select.OptGroup,g=(l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Sider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea),h=o.default.createClass({displayName:"MovieEditDialog",getInitialState:function(){return{width:600,title:"修改电影信息",editMovieUrl:"/movie/info",getFilmmakersUrl:"/filmmaker/info/list",getActorIdsUrl:"/filmmaker/id/list/",getTagGroupsUrl:"/tagGroup/tag/list",getSelectedTagIdsUrl:"/tag/id/list/",tipOfEditing:"正在保存电影修改",filmmakers:[],actorIds:[],tagGroups:[],selectedTagIds:[]}},updateFilmmakers:function(e){this.setState({filmmakers:e})},updateActorIds:function(e){this.setState({actorIds:e})},updateTagGroups:function(e){this.setState({tagGroups:e})},updateSelectedTagIds:function(e){this.setState({selectedTagIds:e})},loadSelectedTagIdsData:function(e){var t=this.state.getSelectedTagIdsUrl;d.ajax.get({url:t+e,success:function(e){this.updateSelectedTagIds(e.data.list)}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),complete:function(){}.bind(this)})},loadFilmmakerData:function(e){var t=e.onSuccess,a=this.state.getFilmmakersUrl;d.ajax.get({url:a,success:function(e){this.updateFilmmakers(e.data.list),isUndefined(t)||t(e)}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),complete:function(){}.bind(this)})},loadActorIdsData:function(e){var t=this.state.getActorIdsUrl;d.ajax.get({url:t+e,success:function(e){this.updateActorIds(e.data.list)}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),complete:function(){}.bind(this)})},loadTagGroupsData:function(e){var t=e.onSuccess,a=this.state.getTagGroupsUrl;d.ajax.get({url:a,success:function(e){this.updateTagGroups(e.data.list),isUndefined(t)||t(e)}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),complete:function(){}.bind(this)})},showDialog:function(e){this.getMovieEditDialog().showDialog(),this.loadFilmmakerData({onSuccess:function(){this.loadActorIdsData(e.id)}.bind(this)}),this.loadTagGroupsData({onSuccess:function(){this.loadSelectedTagIdsData(e.id)}.bind(this)})},getMovieEditDialog:function(){return this.refs.movie_edit_dialog},handleSubmit:function(e){var t=this.state,a=t.editMovieUrl,i=t.tipOfEditing,n=l.message.loading(i,0);e=function(e){return e.releaseTime=timeFormatter.long2Int(new Date(e.releaseTime._d).getTime()),e.actorIds=e.actorIds.join(","),e.tagIds=e.tagIds.join(","),e}(e),d.ajax.put({url:a,data:e,success:function(e){var t=this.props.onEditSuccess;l.message.success(e.msg),this.getMovieEditDialog().closeDialog(),isUndefined(t)||t(e.data.movie),this.getMovieEditDialog().clearForm()}.bind(this),failure:function(e){l.message.error(e.msg)},complete:function(){n(),this.getMovieEditDialog().formLeaveLoading()}.bind(this)})},handleCancel:function(){this.getMovieEditDialog().clearForm()},componentDidMount:function(){},render:function(){var e=this.props.echoData,t=this.state,a=t.title,i=t.width,n=t.filmmakers,r=t.actorIds,u=t.tagGroups,h=t.selectedTagIds;e=d.commons.clone(e);e=function(e){return isUndefined(e)?{}:(isUndefined(e.createTime)||(e.createTime=timeFormatter.formatTime(timeFormatter.int2Long(e.createTime))),isUndefined(e.updateTime)||(e.updateTime=timeFormatter.formatTime(timeFormatter.int2Long(e.updateTime))),isUndefined(e.releaseTime)||(e.releaseTime=(0,s.default)(timeFormatter.int2Long(e.releaseTime))),e)}(e);var p=[];isUndefined(n)||(p=n.map(function(e,t){var a=e.id+"",i="姓名："+e.name+"\r\n别名："+e.alias+"\r\n简介:"+e.description;return o.default.createElement(m,{title:i,key:e.name,value:a},e.name)}.bind(this)));var b=[{cols:[{col:{span:7},label:"id",id:"id",config:{initialValue:e.id},input:o.default.createElement(l.Input,{name:"id",autoComplete:"off",disabled:!0})},{col:{span:1},input:o.default.createElement("div",null)},{col:{span:7},label:"名称",id:"name",config:{initialValue:e.name,rules:[{required:!0,message:"请输入电影名称!"}]},input:o.default.createElement(l.Input,{placeholder:"请输入电影名称",name:"name"})},{col:{span:1},input:o.default.createElement("div",null)},{col:{span:7},label:"状态",id:"status",config:{initialValue:e.status,rules:[{required:!0,message:"请输入状态!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入状态"},d.commons.getStatusOptions())}]},{cols:[{col:{span:7},label:"别名",id:"alias",config:{initialValue:e.alias,rules:[{required:!0,whitespace:!0,message:"请输入别名!"}]},input:o.default.createElement(l.Input,{name:"alias",autoComplete:"off",placeholder:"别名"})},{col:{span:1},input:o.default.createElement("div",null)},{col:{span:7},label:"发布时间",id:"releaseTime",config:{initialValue:e.releaseTime,rules:[{type:"object",required:!0,whitespace:!0,message:"请输入发布时间!"}]},input:o.default.createElement(l.DatePicker,{name:"releaseTime",style:{width:"100%"},autoComplete:"off",placeholder:"请输入发布时间"})},{col:{span:1},input:o.default.createElement("div",null)},{col:{span:7},label:"评分",id:"ignore_score",config:{initialValue:e.score},input:o.default.createElement(l.Input,{name:"ignore_score",autoComplete:"off",disabled:!0})}]},{cols:[{col:{span:7},label:"观看数",id:"ignore_watchNum",config:{initialValue:e.watchNum},input:o.default.createElement(l.Input,{disabled:!0})},{col:{span:1},input:o.default.createElement("div",null)},{col:{span:7},label:"电影时长(分钟)",id:"movieTime",config:{initialValue:e.movieTime,rules:[{required:!0,message:"请输入电影时长!"}]},input:o.default.createElement(l.InputNumber,{autoComplete:"off",style:{width:"100%"},placeholder:"请输入电影时长",min:1,max:600})},{col:{span:1},input:o.default.createElement("div",null)},{col:{span:7},label:"创建时间",id:"ignore_createTime",config:{initialValue:e.createTime},input:o.default.createElement(l.Input,{disabled:!0})}]},{cols:[{col:{span:7},label:"最后更新时间",id:"ignore_updateTime",config:{initialValue:e.updateTime},input:o.default.createElement(l.Input,{disabled:!0})},{col:{span:1},input:o.default.createElement("div",null)},{col:{span:7},label:"导演",id:"directorId",config:{initialValue:e.directorId,rules:[{required:!0,message:"请选择导演!"}]},input:o.default.createElement(l.Select,{showSearch:!0,optionFilterProp:"children",notFoundContent:"无相关电影人",placeholder:"请选择导演",style:{width:"100%"}},p)}]},{cols:[{col:{span:11},label:"演员",id:"actorIds",config:{initialValue:d.commons.toStrArr(r),rules:[{required:!0,message:"请选择演员!"}]},input:o.default.createElement(l.Select,{mode:"multiple",optionFilterProp:"children",notFoundContent:"无相关电影人",placeholder:"请选择演员",style:{width:"100%"}},p)},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"标签",id:"tagIds",config:{initialValue:d.commons.toStrArr(h),rules:[{required:!0,message:"请选择标签!"}]},input:o.default.createElement(l.Select,{mode:"multiple",optionFilterProp:"children",notFoundContent:"无相关标签",placeholder:"请选择标签",style:{width:"100%"}},u.map(function(e,t){return o.default.createElement(f,{key:t,label:e.name},e.items.map(function(e,t){var a=e.id+"";return o.default.createElement(m,{key:t,value:a},e.name)}))}))}]},{cols:[{col:{span:24},label:"简介",id:"description",config:{initialValue:e.description,rules:[{required:!0,message:"请输入简介!"}]},input:o.default.createElement(g,{placeholder:"请输入简介",autosize:{minRows:4,maxRows:8}})}]}];return o.default.createElement(c.default,{width:i,title:a,formRows:b,formLayout:"horizontal",handleSubmit:this.handleSubmit,handleCancel:this.handleCancel,ref:"movie_edit_dialog"})}});t.default=h},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(6);i(r),a(4);a(8),a(2);var s=a(3),d=a(5),u=i(d),c=l.Select.Option,m=l.Select.OptGroup,f=(l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Sider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea),g=o.default.createClass({displayName:"MovieAddDialog",getInitialState:function(){return{title:"添加电影",addMovieUrl:"/movie/info",getFilmmakersUrl:"/filmmaker/info/list",getTagGroupsUrl:"/tagGroup/tag/list",tipOfAddingMovie:"正在添加电影",filmmakers:[],tagGroups:[]}},updateTagGroups:function(e){this.setState({tagGroups:e})},loadTagGroupsData:function(){var e=this.state.getTagGroupsUrl;s.ajax.get({url:e,success:function(e){this.updateTagGroups(e.data.list)}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),complete:function(){}.bind(this)})},showDialog:function(){this.getMovieAddDialog().showDialog(),this.loadFilmmakerData(),this.loadTagGroupsData()},getMovieAddDialog:function(){return this.refs.movie_add_dialog},handleSubmit:function(e){var t=this.state.tipOfAddingMovie,a=l.message.loading(t,0),i=this.state.addMovieUrl;e=function(e){return e.releaseTime=timeFormatter.long2Int(new Date(e.releaseTime._d).getTime()),e.actorIds=e.actorIds.join(","),e.tagIds=e.tagIds.join(","),e}(e),s.ajax.post({url:i,data:e,success:function(e){var t=this.props.onAddSuccess;l.message.success(e.msg),this.getMovieAddDialog().closeDialog(),isUndefined(t)||t(e.data.movie),this.getMovieAddDialog().clearForm()}.bind(this),failure:function(e){l.message.error(e.msg)},complete:function(){a(),this.getMovieAddDialog().formLeaveLoading()}.bind(this)})},updateFilmmakers:function(e){this.setState({filmmakers:e})},loadFilmmakerData:function(){var e=this.state.getFilmmakersUrl;s.ajax.get({url:e,success:function(e){this.updateFilmmakers(e.data.list)}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),complete:function(){}.bind(this)})},handleCancel:function(){},componentDidMount:function(){},render:function(){var e=this.state,t=e.filmmakers,a=e.title,i=e.tagGroups,n=[];isUndefined(t)||(n=t.map(function(e,t){var a=e.id+"",i="姓名："+e.name+"\r\n别名："+e.alias+"\r\n简介:"+e.description;return o.default.createElement(c,{title:i,key:e.name,value:a},e.name)}.bind(this)));var r=[{cols:[{col:{span:11},label:"名称",id:"name",config:{rules:[{required:!0,message:"请输入电影名称!"}]},input:o.default.createElement(l.Input,{placeholder:"请输入电影名称",name:"name"})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"别名",id:"alias",config:{rules:[{required:!0,whitespace:!0,message:"请输入电影别名!"}]},input:o.default.createElement(l.Input,{autoComplete:"off",placeholder:"请输入电影别名"})}]},{cols:[{col:{span:11},label:"状态",id:"status",config:{rules:[{required:!0,message:"请输入状态!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入状态"},s.commons.getStatusOptions())},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"电影时长(分钟)",id:"movieTime",config:{rules:[{required:!0,message:"请输入时长!"}]},input:o.default.createElement(l.InputNumber,{autoComplete:"off",style:{width:"100%"},placeholder:"请输入电影时长",min:1,max:600})}]},{cols:[{col:{span:11},label:"发布时间",id:"releaseTime",config:{rules:[{type:"object",required:!0,whitespace:!0,message:"请输入发布时间!"}]},input:o.default.createElement(l.DatePicker,{autoComplete:"off",placeholder:"请输入发布时间"})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"演员",id:"actorIds",config:{rules:[{required:!0,message:"请选择演员!"}]},input:o.default.createElement(l.Select,{mode:"multiple",optionFilterProp:"children",notFoundContent:"无相关电影人",placeholder:"请选择演员",style:{width:"100%"}},n)}]},{cols:[{col:{span:11},label:"导演",id:"directorId",config:{rules:[{required:!0,message:"请选择导演!"}]},input:o.default.createElement(l.Select,{showSearch:!0,optionFilterProp:"children",notFoundContent:"无相关电影人",placeholder:"请选择导演",style:{width:"100%"}},n)},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"标签",id:"tagIds",config:{rules:[{required:!0,message:"请选择标签!"}]},input:o.default.createElement(l.Select,{mode:"multiple",optionFilterProp:"children",notFoundContent:"无相关标签",placeholder:"请选择标签",style:{width:"100%"}},i.map(function(e,t){return o.default.createElement(m,{key:t,label:e.name},e.items.map(function(e,t){var a=e.id+"";return o.default.createElement(c,{key:t,value:a},e.name)}))}))}]},{cols:[{col:{span:24},label:"简介",id:"description",config:{rules:[{required:!0,message:"请输入简介!"}]},input:o.default.createElement(f,{placeholder:"请输入简介",autosize:{minRows:4,maxRows:8}})}]}];return o.default.createElement(u.default,{title:a,formRows:r,handleSubmit:this.handleSubmit,handleCancel:this.handleCancel,ref:"movie_add_dialog"})}});t.default=g},function(e,t,a){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=function(e){return e&&e.__esModule?e:{default:e}}(n),l=a(1);a(2),a(50);var r=a(3),s=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Sider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea,o.default.createClass({displayName:"MovieSrcVersionAddDialog",getInitialState:function(){return{width:300,title:"上传视频资源",uploadUrl:"/movie/version/info",loading:!1,visible:!1,maskClosable:!1,fileList:[],movieId:void 0,sharpness:void 0}},showDialog:function(e){this.updateMovieId(e.id),this.setState({visible:!0})},updateMovieId:function(e){this.setState({movieId:e})},updateLoading:function(e){this.setState({loading:e})},handleSubmit:function(e){},handleCancel:function(){},updateFileList:function(e){this.setState({fileList:e})},handleUpload:function(){var e=this.state,t=e.fileList,a=e.uploadUrl,i=e.movieId,n=e.sharpness,o=this.props.onMovieSrcVersionAddSuccess,s=new FormData;t.forEach(function(e){s.append("file",e)}),s.append("movieId",i),s.append("sharpness",n),this.updateLoading(!0),r.ajax.post({url:a,data:s,enctype:"multipart/form-data",contentType:!1,processData:!1,beforeSend:function(){}.bind(this),success:function(e){l.message.success(e.msg),this.updateVisible(!1),this.updateSharpness(void 0),this.updateFileList([]),o(e.data.video)}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),complete:function(){this.updateLoading(!1)}.bind(this)})},updateVisible:function(e){this.setState({visible:e})},onCancel:function(){this.updateVisible(!1)},onSelectSharpness:function(e,t){this.updateSharpness(e)},updateSharpness:function(e){this.setState({sharpness:e})},render:function(){var e=this,t=this.state,a=t.width,n=t.title,s=t.uploadUrl,d=t.loading,u=t.visible,c=t.maskClosable,m={onRemove:function(t){e.setState(function(e){var a=e.fileList,i=a.indexOf(t),n=a.slice();return n.splice(i,1),{fileList:n}})},beforeUpload:function(t){return e.setState(function(e){return{fileList:[].concat(i(e.fileList),[t])}}),!1},fileList:this.state.fileList};return o.default.createElement(l.Modal,{width:a,title:n,uploadUrl:s,loading:d,visible:u,closable:!d,maskClosable:c,onCancel:this.onCancel,footer:null,style:{textAlign:"center"}},o.default.createElement(l.Upload,m,o.default.createElement(l.Button,{disabled:this.state.fileList.length>=1},o.default.createElement(l.Icon,{type:"upload"})," 选择视频文件")),o.default.createElement(l.Select,{name:"sharpness",value:this.state.sharpness,disabled:d,onSelect:this.onSelectSharpness,placeholder:"请输入清晰度",style:{width:"65%",margin:15}},r.commons.getSharpnessOptions()),o.default.createElement(l.Button,{className:"upload-demo-start",type:"primary",onClick:this.handleUpload,disabled:0==this.state.fileList.length||isEmptyString(this.state.sharpness),loading:d},d?"上传中":"开始上传"))}}));t.default=s},function(e,t){},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1);a(17),a(2);var r=a(3),s=a(52),d=i(s),u=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Slider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea,o.default.createClass({displayName:"MovieSrcVersionTable",getInitialState:function(){return{tagTable:{dataSourceUrl:"/movie/version/info/list/ByMovieId/",bordered:!1,tableLoading:!1,columns:[],data:[],originalData:[],echoData:{},deletingTip:"正在删除",delMovieSrcVersionUrl:"/movie/version/info"}}},componentDidMount:function(){this.loadData(),this.registEvents()},registEvents:function(){var e=this,t=this.props.movieId;window.eventEmitter.on("onMovieSrcVersionAddSuccess",function(a){a.movieId==t&&e.loadData()}),window.eventEmitter.on("loadMovieSrcVersionTableData",function(){e.loadData()})},updateTableLoading:function(e){var t=this.state;t.tagTable.tableLoading=e,this.setState(t)},updateTableColumns:function(e){var t=this.state;t.tagTable.columns=e,this.setState(t)},updateTableData:function(e){var t=this.state;t.tagTable.data=e,this.setState(t)},updateOriginalData:function(e){var t=this.state;t.tagTable.originalData=e,this.setState(t)},updateTableEchoData:function(e){var t=this.state;t.tagTable.echoData=e,this.setState(t)},dataConverter:function(e){for(var t=[],a=0;a<e.length;++a){var i=e[a];t.push({key:a,id:i.id,sharpness:i.sharpness,status:i.status,create_time:i.createTime,update_time:i.updateTime})}return t},showEditDialog:function(e){e=r.commons.getObjByKey(this.state.tagTable.originalData,"id",e.id),this.updateTableEchoData(e),this.getEditDialog().showDialog(e)},getEditDialog:function(){return this.refs.edit_dialog},deleteRecord:function(e){var t=l.message.loading(i),a=this.state.tagTable,i=a.deletingTip,n=a.delMovieSrcVersionUrl;r.ajax.delete({url:n,data:{deletedIds:e.join(",")},complete:function(){t()}.bind(this),success:function(e){l.message.success(e.msg),this.loadData()}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),error:function(){}})},loadData:function(){var e=this;this.updateTableLoading(!0);var t=this.state.tagTable.dataSourceUrl,a=this.props.movieId;r.ajax.get({url:t+a,success:function(e){var t=e.data.list,a=this.dataConverter(t);this.updateOriginalData(t),this.updateTableData(a)}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),error:function(){}.bind(this),complete:function(){this.updateTableLoading(!1)}.bind(this)});var i=[{title:"id",dataIndex:"id",key:"id",width:100},{title:"清晰度",dataIndex:"sharpness",key:"sharpness",width:100,render:function(e){return r.commons.getSharpnessStrByIndex({index:e})}},{title:"状态",dataIndex:"status",key:"status",width:100,render:function(e){return r.commons.getStatusStrByIndex({index:e})}},{title:"创建时间",dataIndex:"create_time",key:"create_time",width:100,render:function(e){return timeFormatter.formatTime(timeFormatter.int2Long(e))}},{title:"最后更新时间",dataIndex:"update_time",key:"update_time",width:100,render:function(e){return timeFormatter.formatTime(timeFormatter.int2Long(e))}},{title:"操作",dataIndex:"operation",key:"operation",width:100,render:function(t,a){var i=o.default.createElement(l.Menu,null,o.default.createElement(l.Menu.Item,null,o.default.createElement("a",{onClick:function(){return e.showEditDialog(a)},href:"javascript:void(0);"},"编辑")),o.default.createElement(l.Menu.Item,null,o.default.createElement(l.Popconfirm,{title:"确认删除 ? ",okText:"删除",cancelText:"取消",onConfirm:function(){return e.deleteRecord([a.id])}},o.default.createElement("a",{href:"javascript:void(0)"},"删除"))));return o.default.createElement("span",{className:"table-operation"},o.default.createElement(l.Dropdown,{overlay:i},o.default.createElement("a",{href:"javascript:void(0);"},"操作 ",o.default.createElement(l.Icon,{type:"down"}))))}}];this.updateTableColumns(i)},onEditSuccess:function(e){this.loadData()},render:function(){var e=this.state.tagTable,t=e.bordered,a=e.columns,i=e.data,n=e.tableLoading,r=e.echoData;return o.default.createElement("div",null,o.default.createElement(l.Table,{className:"components-table-demo-nested",bordered:t,loading:n,columns:a,dataSource:i,pagination:!1}),o.default.createElement(d.default,{ref:"edit_dialog",echoData:r,onEditSuccess:this.onEditSuccess}))}}));t.default=u},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1);a(2);var r=a(3),s=a(5),d=i(s),u=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Sider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea,o.default.createClass({displayName:"MovieSrcVersionEditDialog",getInitialState:function(){return{width:400,title:"修改电影资源信息",editUrl:"/movie/version/info",tipOfEditing:"正在保存电影资源修改",echoData:{}}},showDialog:function(e){this.getMovieSrcVersionEditDialog().showDialog()},getMovieSrcVersionEditDialog:function(){return this.refs.movie_src_version_edit_dialog},handleSubmit:function(e){var t=this.state,a=t.editUrl,i=t.tipOfEditing,n=l.message.loading(i,0);e=function(e){return e}(e),r.ajax.put({url:a,data:e,success:function(e){var t=this.props.onEditSuccess;l.message.success(e.msg),this.getMovieSrcVersionEditDialog().closeDialog(),isUndefined(t)||t(e.data.movie_src_version),this.getMovieSrcVersionEditDialog().clearForm()}.bind(this),failure:function(e){l.message.error(e.msg)},complete:function(){n(),this.getMovieSrcVersionEditDialog().formLeaveLoading()}.bind(this)})},handleCancel:function(){this.getMovieSrcVersionEditDialog().clearForm()},componentDidMount:function(){},render:function(){var e=this.props.echoData,t=this.state,a=t.title,i=t.width;e=r.commons.clone(e);e=function(e){return isUndefined(e)?{}:(isUndefined(e.createTime)||(e.createTime=timeFormatter.formatTime(timeFormatter.int2Long(e.createTime))),isUndefined(e.updateTime)||(e.updateTime=timeFormatter.formatTime(timeFormatter.int2Long(e.updateTime))),e)}(e);var n=[{cols:[{col:{span:11},label:"id",id:"id",config:{initialValue:e.id},input:o.default.createElement(l.Input,{autoComplete:"off",disabled:!0})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"清晰度",id:"sharpness",config:{initialValue:e.sharpness,rules:[{required:!0,message:"请输入清晰度!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入清晰度"},r.commons.getSharpnessOptions())}]},{cols:[{col:{span:11},label:"状态",id:"status",config:{initialValue:e.status,rules:[{required:!0,message:"请输入状态!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入状态"},r.commons.getStatusOptions())},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"创建时间",id:"ignore_createTime",config:{initialValue:e.createTime},input:o.default.createElement(l.Input,{disabled:!0})}]},{cols:[{col:{span:11},label:"最后更新时间",id:"ignore_updateTime",config:{initialValue:e.updateTime},input:o.default.createElement(l.Input,{disabled:!0})},{col:{span:2},input:o.default.createElement("div",null)}]}];return o.default.createElement(d.default,{width:i,title:a,formRows:n,formLayout:"horizontal",handleSubmit:this.handleSubmit,handleCancel:this.handleCancel,ref:"movie_src_version_edit_dialog"})}}));t.default=u},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(4);a(12),a(2);var s=a(54),d=i(s),u=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Slider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea,o.default.createClass({displayName:"FilmmakerPage",getInitialState:function(){return{}},render:function(){return o.default.createElement("div",null,o.default.createElement(d.default,null))}}));t.default=(0,r.withRouter)(u)},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(4);a(55),a(2);var s=a(3),d=a(56),u=i(d),c=a(57),m=i(c),f=a(11),g=i(f),h=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Slider,l.Menu.SubMenu,l.Input.Search),p=(l.Input.TextArea,o.default.createClass({displayName:"FilmmakerTable",getInitialState:function(){return{imgUploaderDialog:{title:"更新电影人图片",width:700,config:{aspectRatio:1,fileTypes:["jpg","png"],fileMaxsize:1048576,saveImgUrl:"/filmmaker/img",uploadTempImgUrl:"/src/img",server_url_prefix:vm_config.http_url_prefix,extraInfo:{}}},filmmakerEditDialog:{echoData:void 0},filmmakerTable:{title:"电影人列表",dataSourceUrl:"/filmmaker/info/list",delFilmmakerUrl:"/filmmaker/info",scroll:{x:!0,y:450},editable:!1,haveSearchFilmmakername:!1,filmmakernameDropdownVisible:!1,bordered:!1,tableLoading:!1,batchDeleteBtnLoading:!1,refreshBtnLoading:!1,selectedRowKeys:[],data:[],originalData:[],page:{start:0,size:5,orderBy:"",orderType:"",total:0},query:{name:""},columns:[],deletingTip:"正在删除"}}},onSearchFilmmakername:function(e){this.updateNameOfQuery(e),isEmptyString(this.state.filmmakerTable.query.name)?this.updateFilmmakerTableHaveSearchFilmmakername(!1):this.updateFilmmakerTableHaveSearchFilmmakername(!0),this.loadFilmmakerTableData()},updateFilmmakerTableHaveSearchFilmmakername:function(e){var t=this.state;t.filmmakerTable.haveSearchFilmmakername=e,this.setState(t)},updateFilmmakerTableFilmmakernameDropdownVisible:function(e){var t=this.state;t.filmmakerTable.filmmakernameDropdownVisible=e,this.setState(t)},updateFilmmakerTableSelectedRowKeys:function(e){var t=this.state;t.filmmakerTable.selectedRowKeys=e,this.setState(t)},removeFilmmakerTableSelectedRowKeys:function(e){var t=this.state.filmmakerTable.selectedRowKeys;t=t.removeByList(e),this.updateFilmmakerTableSelectedRowKeys(t)},updateNameOfQuery:function(e){var t=this.state;t.filmmakerTable.query.name=e,this.setState(t)},updateFilmmakerTableData:function(e){var t=this.state;t.filmmakerTable.data=e,this.setState(t)},updateFilmmakerTableBatchDeleteLoading:function(e){var t=this.state;t.filmmakerTable.batchDeleteBtnLoading=e,this.setState(t)},updateFilmmakerTableRefreshBtnLoading:function(e){var t=this.state;t.filmmakerTable.refreshBtnLoading=e,this.setState(t)},updateFilmmakerTablePage:function(e){var t=this.state;t.filmmakerTable.page=e,this.setState(t)},updateFilmmakerTableQuery:function(e){var t=this.state;t.filmmakerTable.query=e,this.setState(t)},updateFilmmakerTableLoading:function(e){var t=this.state;t.filmmakerTable.tableLoading=e,this.setState(t)},updateFilmmakerTableColumns:function(e){var t=this.state;t.filmmakerTable.columns=e,this.setState(t)},updateFilmmakerTableOriginalData:function(e){var t=this.state;t.filmmakerTable.originalData=e,this.setState(t)},updateFilmmakerEditDialogEchoData:function(e){var t=this.state;t.filmmakerEditDialog.echoData=e,this.setState(t)},showFilmmakerImgUploaderDialog:function(e){this.getFilmmakerImgUploaderDialog().showDialog(),this.getFilmmakerImgUploaderDialog().previewImg(s.commons.generateImgUrl({imgUrl:e.imgUrl,width:300})),this.getFilmmakerImgUploaderDialog().updateExtraInfo(e)},componentDidMount:function(){var e=this;this.updateFilmmakerTableColumns([{title:"id",width:80,dataIndex:"id",sorter:!0},{title:"图片",width:90,dataIndex:"imgUrl",render:function(t,a){var i=s.commons.generateImgUrl({imgUrl:t,width:50});return o.default.createElement("img",{onClick:function(){return e.showFilmmakerImgUploaderDialog(a)},style:{width:50,height:50,cursor:"pointer"},src:i,alt:"暂无"})}},{title:"名称",width:120,dataIndex:"name",render:function(t,a){return s.commons.highLight(t,e.state.filmmakerTable.query.name)},sorter:!0,filterDropdown:o.default.createElement("div",{className:"custom-filter-dropdown"},o.default.createElement(h,{placeholder:"搜索电影名",onSearch:this.onSearchFilmmakername,style:{width:200}})),filterIcon:o.default.createElement(l.Icon,{type:"search",style:{color:this.state.filmmakerTable.haveSearchFilmmakername?"#108ee9":"#aaa"}})},{title:"别名",width:80,dataIndex:"alias",sorter:!0},{title:"国家",width:80,dataIndex:"country",sorter:!0},{title:"职业",width:80,dataIndex:"profession",sorter:!0,render:function(e){return s.commons.makeTipSpan(e,10)}},{title:"血型",width:80,dataIndex:"blood_type",sorter:!0,render:function(e,t){return s.commons.getBloodTypeStrByIndex({index:e})}},{title:"生日",width:80,dataIndex:"birthday",sorter:!0,render:function(e,t){return timeFormatter.formatDate(timeFormatter.int2Long(e))}},{title:"性别",width:80,dataIndex:"sex",sorter:!0,render:function(e){return s.commons.getSexStrByIndex({index:e})}},{title:"状态",width:80,dataIndex:"status",render:function(e){return s.commons.getStatusStrByIndex({index:e})},sorter:!0},{title:"更新时间",width:80,dataIndex:"update_time",render:function(e){return timeFormatter.formatTime(timeFormatter.int2Long(e))},sorter:!0},{title:"创建时间",width:80,dataIndex:"create_time",render:function(e){return timeFormatter.formatTime(timeFormatter.int2Long(e))},sorter:!0},{title:"操作",dataIndex:"operation",width:80,render:function(t,a){var i=o.default.createElement(l.Menu,null,o.default.createElement(l.Menu.Item,null,o.default.createElement("a",{onClick:function(){return e.showEditDialog(a)},href:"javascript:void(0);"},"编辑")),o.default.createElement(l.Menu.Item,null,o.default.createElement(l.Popconfirm,{title:"确认删除 ? ",okText:"删除",cancelText:"取消",onConfirm:function(){return e.deleteRecord([a.id])}},o.default.createElement("a",{href:"javascript:void(0)"},"删除"))));return o.default.createElement("div",null,o.default.createElement(l.Dropdown,{overlay:i},o.default.createElement("a",{href:"javascript:void(0);"},"操作 ",o.default.createElement(l.Icon,{type:"down"}))))},sorter:!0}]),this.loadFilmmakerTableData()},uploadFilmmakerSrc:function(e){},handleTableChange:function(e,t,a){var i=this.state.filmmakerTable.page,n=e.pageSize,o=(e.current-1)*n,l=isUndefined(a.field)?"":a.field,r=isUndefined(a.order)?"":a.order;this.updateFilmmakerTablePage({start:o,size:n,orderBy:l,orderType:r,total:i.total}),this.loadFilmmakerTableData()},filmmakerTableDataFiledsConverter:function(e){var t=[];return $.each(e,function(e,a){t.push({key:a.id,id:a.id,imgUrl:a.imgUrl,name:a.name,alias:a.alias,description:a.description,create_time:a.createTime,update_time:a.updateTime,status:a.status,profession:a.profession,blood_type:a.bloodType,sex:a.sex,country:a.country,birthday:a.birthday})}.bind(this)),t},loadFilmmakerTableData:function(){this.updateFilmmakerTableLoading(!0),this.updateFilmmakerTableRefreshBtnLoading(!0);var e=this.state.filmmakerTable,t=e.page,a=e.query,i=t.orderType;"descend"==i&&(i="desc"),"ascend"==i&&(i="asc"),t.orderType=i,s.ajax.get({url:this.state.filmmakerTable.dataSourceUrl,data:$.extend(t,a),success:function(e){var t=e.data.list,a=this.filmmakerTableDataFiledsConverter(t);this.updateFilmmakerTableOriginalData(t),this.updateFilmmakerTableData(a);var i=this.state.filmmakerTable.page;this.updateFilmmakerTablePage({start:i.start,size:i.size,orderBy:i.orderBy,orderType:i.orderType,total:e.data.total})}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),error:function(){}.bind(this),complete:function(){this.updateFilmmakerTableLoading(!1),this.updateFilmmakerTableRefreshBtnLoading(!1)}.bind(this)})},showEditDialog:function(e){e=s.commons.getObjByKey(this.state.filmmakerTable.originalData,"id",e.id),this.updateFilmmakerEditDialogEchoData(e),this.getFilmmakerEditDialog().showDialog()},deleteRecord:function(e){var t=l.message.loading(i);this.updateFilmmakerTableBatchDeleteLoading(!0);var a=this.state.filmmakerTable,i=a.deletingTip,n=a.delFilmmakerUrl;s.ajax.delete({url:n,data:{deletedIds:e.join(",")},complete:function(){t(),this.updateFilmmakerTableBatchDeleteLoading(!1)}.bind(this),success:function(t){l.message.success(t.msg),this.removeFilmmakerTableSelectedRowKeys(e),this.loadFilmmakerTableData()}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),error:function(){}})},showAddDialog:function(){this.getFilmmakerAddDialog().showDialog()},getFilmmakerAddDialog:function(){return this.refs.filmmaker_add_dialog},getFilmmakerEditDialog:function(){return this.refs.filmmaker_edit_dialog},onEditSuccess:function(e){var t=s.commons.updateObjByKey(this.state.filmmakerTable.originalData,"id",e.id,e);this.updateFilmmakerTableOriginalData(t);var a=this.filmmakerTableDataFiledsConverter(t);this.updateFilmmakerTableData(a)},onAddSuccess:function(e){this.loadFilmmakerTableData()},getFilmmakerImgUploaderDialog:function(){return this.refs.filmmaker_img_uploader_dialog},onUpdateImgSuccess:function(e){this.onEditSuccess(e.data.filmmaker)},onUploadTempImgSuccess:function(e){this.getFilmmakerImgUploaderDialog().previewImg(vm_config.http_url_prefix+e.data.imgUrl)},expandedRowRender:function(e){return o.default.createElement("span",null,"简介 ：",o.default.createElement("p",{style:{margin:0}},e.description))},render:function(){var e=this,t=this.state.filmmakerEditDialog.echoData,a=this.state.filmmakerTable,i=a.title,n=a.scroll,r=a.selectedRowKeys,s=a.columns,d=a.data,c=a.page,f=a.tableLoading,h=a.batchDeleteBtnLoading,p=a.refreshBtnLoading,b=a.bordered,v={onChange:function(t,a){e.updateFilmmakerTableSelectedRowKeys(t)},onSelect:function(e,t,a){},onSelectAll:function(e,t,a){}},T=(this.state.posterUploaderDialog,this.state.imgUploaderDialog),y=r.length>0;return o.default.createElement("div",null,o.default.createElement("div",{style:{marginBottom:16}},o.default.createElement(l.Button,{loading:p,onClick:this.loadFilmmakerTableData},"刷新"),o.default.createElement(l.Button,{style:{marginLeft:8},type:"primary",onClick:this.showAddDialog},"添加"),o.default.createElement(l.Popconfirm,{title:"确认删除 ? ",okText:"删除",cancelText:"取消",onConfirm:function(){return e.deleteRecord(r)}},o.default.createElement(l.Button,{style:{marginLeft:8},type:"danger",disabled:!y,loading:h},"批量删除")),o.default.createElement("span",{style:{marginLeft:8}},y?"选择了 "+r.length+" 个选项":"")),o.default.createElement(l.Table,{expandedRowRender:this.expandedRowRender,locale:{emptyText:"暂无用户数据"},columns:s,rowSelection:v,dataSource:d,pagination:{total:c.total,showTotal:function(e,t){return"第 "+t[0]+"-"+t[1]+" 条记录 , 共 "+e+" 条记录"},pageSize:c.size,defaultCurrent:1},loading:f,onChange:this.handleTableChange,bordered:b,title:function(){return i},scroll:n}),o.default.createElement(u.default,{ref:"filmmaker_edit_dialog",echoData:t,onEditSuccess:this.onEditSuccess}),o.default.createElement(m.default,{ref:"filmmaker_add_dialog",onAddSuccess:this.onAddSuccess}),o.default.createElement(g.default,{ref:"filmmaker_img_uploader_dialog",config:T.config,title:T.title,width:T.width,onUpdateImgSuccess:this.onUpdateImgSuccess,onUploadTempImgSuccess:this.onUploadTempImgSuccess}))}}));t.default=(0,r.withRouter)(p)},function(e,t){},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(6),s=i(r);a(4);a(12),a(2);var d=a(3),u=a(5),c=i(u),m=l.Select.Option,f=(l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Sider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea),g=o.default.createClass({displayName:"FilmmakerEditDialog",getInitialState:function(){return{title:"修改电影人信息",editFilmmakerUrl:"/filmmaker/info",tipOfEditing:"正在保存电影人修改"}},componentWillReceiveProps:function(){},showDialog:function(){this.getFilmmakerEditDialog().showDialog()},getFilmmakerEditDialog:function(){return this.refs.filmmaker_edit_dialog},handleSubmit:function(e){var t=this.state,a=t.editFilmmakerUrl,i=t.tipOfEditing,n=l.message.loading(i,0);e=function(e){return e.birthday=timeFormatter.long2Int(e.birthday._d.getTime()),e}(e),d.ajax.put({url:a,data:e,success:function(e){var t=this.props.onEditSuccess;l.message.success(e.msg),this.getFilmmakerEditDialog().closeDialog(),isUndefined(t)||t(e.data.filmmaker),this.getFilmmakerEditDialog().clearForm()}.bind(this),failure:function(e){l.message.error(e.msg)},complete:function(){n(),this.getFilmmakerEditDialog().formLeaveLoading()}.bind(this)})},handleCancel:function(){this.getFilmmakerEditDialog().clearForm()},componentDidMount:function(){},updateConstellationObj:function(e){this.setState({constellationObj:e})},onBirthdayChange:function(e,t){this.props.echoData.constellation=d.commons.transConStrByDate(e._d)},render:function(){var e=this.props.echoData,t=this.state.title;e=d.commons.clone(e),e=function(e){return isUndefined(e)?{}:(isUndefined(e.createTime)||(e.createTime=timeFormatter.formatTime(timeFormatter.int2Long(e.createTime))),isUndefined(e.updateTime)||(e.updateTime=timeFormatter.formatTime(timeFormatter.int2Long(e.updateTime))),isUndefined(e.birthday)||(e.birthday=(0,s.default)(timeFormatter.int2Long(e.birthday))),e)}.bind(this)(e);var a=[{cols:[{col:{span:11},label:"id",id:"id",config:{initialValue:e.id},input:o.default.createElement(l.Input,{name:"id",autoComplete:"off",disabled:!0})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"名称",id:"name",config:{initialValue:e.name,rules:[{required:!0,message:"请输入电影人名称!"}]},input:o.default.createElement(l.Input,{placeholder:"请输入电影人名称",name:"name"})}]},{cols:[{col:{span:11},label:"状态",id:"status",config:{initialValue:e.status,rules:[{required:!0,message:"请输入状态!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入状态"},o.default.createElement(m,{value:"1"},"正常"),o.default.createElement(m,{value:"2"},"冻结"))},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"别名",id:"alias",config:{initialValue:e.alias,rules:[{required:!0,whitespace:!0,message:"请输入别名!"}]},input:o.default.createElement(l.Input,{autoComplete:"off",placeholder:"别名"})}]},{cols:[{col:{span:11},label:"生日",id:"birthday",config:{initialValue:e.birthday,rules:[{type:"object",required:!0,whitespace:!0,message:"请输入生日!"}]},input:o.default.createElement(l.DatePicker,{onChange:this.onBirthdayChange,autoComplete:"off",placeholder:"请输入生日"})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"性别",id:"sex",config:{initialValue:e.sex,rules:[{required:!0,message:"请输入性别!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入性别"},d.commons.getSexOptions())}]},{cols:[{col:{span:11},label:"职业",id:"profession",config:{initialValue:e.profession,rules:[{required:!0,whitespace:!0,message:"请输入职业!"}]},input:o.default.createElement(l.Input,{placeholder:"请输入职业"})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"血型",id:"bloodType",config:{initialValue:e.bloodType,rules:[{required:!0,whitespace:!0,message:"请输入血型!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入请输入血型"},d.commons.getBloodTypeOptions())}]},{cols:[{col:{span:11},label:"国家",id:"country",config:{initialValue:e.country,rules:[{required:!0,whitespace:!0,message:"请输入国家!"}]},input:o.default.createElement(l.Input,{placeholder:"请输入国家"})},{col:{span:2},input:o.default.createElement("div",null)}]},{cols:[{col:{span:11},label:"创建时间",id:"ignore_createTime",config:{initialValue:e.createTime},input:o.default.createElement(l.Input,{disabled:!0})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"最后更新时间",id:"ignore_updateTime",config:{initialValue:e.updateTime},input:o.default.createElement(l.Input,{disabled:!0})}]},{cols:[{col:{span:24},label:"简介",id:"description",config:{initialValue:e.description,rules:[{required:!0,message:"请输入简介!"}]},input:o.default.createElement(f,{placeholder:"请输入简介",autosize:{minRows:4,maxRows:8}})}]}];return o.default.createElement(c.default,{title:t,formRows:a,formLayout:"horizontal",handleSubmit:this.handleSubmit,handleCancel:this.handleCancel,ref:"filmmaker_edit_dialog"})}});t.default=g},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(6);i(r),a(4);a(12),a(2);var s=a(3),d=a(5),u=i(d),c=l.Select.Option,m=(l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Sider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea),f=o.default.createClass({displayName:"FilmmakerAddDialog",getInitialState:function(){return{title:"添加电影人",addFilmmakerUrl:"/filmmaker/info",tipOfAddingFilmmaker:"正在添加电影人"}},showDialog:function(){this.getFilmmakerAddDialog().showDialog()},getFilmmakerAddDialog:function(){return this.refs.filmmaker_add_dialog},handleSubmit:function(e){var t=this.state.tipOfAddingFilmmaker,a=l.message.loading(t,0),i=this.state.addFilmmakerUrl;e=function(e){return e.birthday=timeFormatter.long2Int(e.birthday._d.getTime()),e}(e),s.ajax.post({url:i,data:e,success:function(e){var t=this.props.onAddSuccess;l.message.success(e.msg),this.getFilmmakerAddDialog().closeDialog(),isUndefined(t)||t(e.data.filmmaker),this.getFilmmakerAddDialog().clearForm()}.bind(this),failure:function(e){l.message.error(e.msg)},complete:function(){a(),this.getFilmmakerAddDialog().formLeaveLoading()}.bind(this)})},handleCancel:function(){},componentDidMount:function(){},render:function(){var e=this.state.title,t=[{cols:[{col:{span:11},label:"名称",id:"name",config:{rules:[{required:!0,message:"请输入电影人名称!"}]},input:o.default.createElement(l.Input,{placeholder:"请输入电影人名称",name:"name"})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"别名",id:"alias",config:{rules:[{required:!0,whitespace:!0,message:"请输入电影人别名!"}]},input:o.default.createElement(l.Input,{autoComplete:"off",placeholder:"请输入电影人别名"})}]},{cols:[{col:{span:11},label:"状态",id:"status",config:{rules:[{required:!0,message:"请输入状态!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入状态"},o.default.createElement(c,{value:"1"},"正常"),o.default.createElement(c,{value:"2"},"冻结"))},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"性别",id:"sex",config:{rules:[{required:!0,message:"请输入性别!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入性别"},s.commons.getSexOptions())}]},{cols:[{col:{span:11},label:"生日",id:"birthday",config:{rules:[{type:"object",required:!0,whitespace:!0,message:"请输入生日!"}]},input:o.default.createElement(l.DatePicker,{autoComplete:"off",placeholder:"请输入生日"})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"职业",id:"profession",config:{rules:[{required:!0,whitespace:!0,message:"请输入职业!"}]},input:o.default.createElement(l.Input,{placeholder:"请输入职业"})}]},{cols:[{col:{span:11},label:"血型",id:"bloodType",config:{rules:[{required:!0,whitespace:!0,message:"请输入血型!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入请输入血型"},s.commons.getBloodTypeOptions())},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"国家",id:"country",config:{rules:[{required:!0,whitespace:!0,message:"请输入国家!"}]},input:o.default.createElement(l.Input,{placeholder:"请输入国家"})}]},{cols:[{col:{span:24},label:"简介",id:"description",config:{rules:[{required:!0,message:"请输入简介!"}]},input:o.default.createElement(m,{placeholder:"请输入简介",autosize:{minRows:4,maxRows:8}})}]}];return o.default.createElement(u.default,{title:e,formRows:t,handleSubmit:this.handleSubmit,handleCancel:this.handleCancel,ref:"filmmaker_add_dialog"})}});t.default=f},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(4);a(8),a(2);var s=a(59),d=i(s),u=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Slider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea,o.default.createClass({displayName:"TagGroupPage",getInitialState:function(){return{}},render:function(){return o.default.createElement("div",null,o.default.createElement(d.default,null))}}));t.default=(0,r.withRouter)(u)},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(4);a(60),a(2);var s=a(3),d=a(61),u=i(d),c=a(63),m=i(c),f=a(64),g=i(f),h=a(65),p=i(h),b=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Slider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea,o.default.createClass({displayName:"TagGroupTable",getInitialState:function(){return{editDialog:{echoData:{}},addDialog:{},tagGroupTable:{title:"标签分组列表",dataSourceUrl:"/tagGroup/info/list",delTagGroupUrl:"/tagGroup/info",scroll:{x:!0,y:450},editable:!1,haveSearchTagGroupname:!1,tagGroupnameDropdownVisible:!1,bordered:!1,tableLoading:!1,batchDeleteBtnLoading:!1,refreshBtnLoading:!1,expandRowByClick:!1,selectedRowKeys:[],data:[],originalData:[],page:{start:0,size:5,orderBy:"",orderType:"",total:0},query:{name:""},columns:[],deletingTip:"正在删除"}}},onSearchTagGroupname:function(e){this.updateNameOfQuery(e),isEmptyString(this.state.tagGroupTable.query.name)?this.updateTagGroupTableHaveSearchTagGroupname(!1):this.updateTagGroupTableHaveSearchTagGroupname(!0),this.loadTagGroupTableData()},updateTagGroupTableHaveSearchTagGroupname:function(e){var t=this.state;t.tagGroupTable.haveSearchTagGroupname=e,this.setState(t)},updateTagGroupTableTagGroupnameDropdownVisible:function(e){var t=this.state;t.tagGroupTable.tagGroupnameDropdownVisible=e,this.setState(t)},updateTagGroupTableSelectedRowKeys:function(e){var t=this.state;t.tagGroupTable.selectedRowKeys=e,this.setState(t)},removeTagGroupTableSelectedRowKeys:function(e){var t=this.state.tagGroupTable.selectedRowKeys;t=t.removeByList(e),this.updateTagGroupTableSelectedRowKeys(t)},updateNameOfQuery:function(e){var t=this.state;t.tagGroupTable.query.name=e,this.setState(t)},updateTagGroupTableData:function(e){var t=this.state;t.tagGroupTable.data=e,this.setState(t)},updateTagGroupTableBatchDeleteLoading:function(e){var t=this.state;t.tagGroupTable.batchDeleteBtnLoading=e,this.setState(t)},updateTagGroupTableRefreshBtnLoading:function(e){var t=this.state;t.tagGroupTable.refreshBtnLoading=e,this.setState(t)},updateTagGroupTablePage:function(e){var t=this.state;t.tagGroupTable.page=e,this.setState(t)},updateTagGroupTableQuery:function(e){var t=this.state;t.tagGroupTable.query=e,this.setState(t)},updateTagGroupTableLoading:function(e){var t=this.state;t.tagGroupTable.tableLoading=e,this.setState(t)},updateTagGroupTableColumns:function(e){var t=this.state;t.tagGroupTable.columns=e,this.setState(t)},updateTagGroupTableOriginalData:function(e){var t=this.state;t.tagGroupTable.originalData=e,this.setState(t)},componentDidMount:function(){var e=this;this.updateTagGroupTableColumns([{title:"id",width:100,dataIndex:"id",sorter:!0},{title:"分组名称",width:90,dataIndex:"name"},{title:"状态",width:80,dataIndex:"status",render:function(e){return s.commons.getStatusStrByIndex({index:e})},sorter:!0},{title:"更新时间",width:100,dataIndex:"update_time",render:function(e){return timeFormatter.formatTime(timeFormatter.int2Long(e))},sorter:!0},{title:"创建时间",width:100,dataIndex:"create_time",render:function(e){return timeFormatter.formatTime(timeFormatter.int2Long(e))},sorter:!0},{title:"操作",dataIndex:"operation",width:100,render:function(t,a){var i=o.default.createElement(l.Menu,null,o.default.createElement(l.Menu.Item,null,o.default.createElement("a",{onClick:function(){return e.showTagAddDialog(a)},href:"javascript:void(0);"},"添加标签")),o.default.createElement(l.Menu.Item,null,o.default.createElement("a",{onClick:function(){return e.showEditDialog(a)},href:"javascript:void(0);"},"编辑")),o.default.createElement(l.Menu.Item,null,o.default.createElement(l.Popconfirm,{title:"确认删除 ? ",okText:"删除",cancelText:"取消",onConfirm:function(){return e.deleteRecord([a.id])}},o.default.createElement("a",{href:"javascript:void(0)"},"删除"))));return o.default.createElement("span",{className:"table-operation"},o.default.createElement(l.Dropdown,{overlay:i},o.default.createElement("a",{href:"javascript:void(0);"},"操作 ",o.default.createElement(l.Icon,{type:"down"}))))},sorter:!0}]),this.loadTagGroupTableData()},uploadTagGroupSrc:function(e){},handleTableChange:function(e,t,a){var i=this.state.tagGroupTable.page,n=e.pageSize,o=(e.current-1)*n,l=isUndefined(a.field)?"":a.field,r=isUndefined(a.order)?"":a.order;this.updateTagGroupTablePage({start:o,size:n,orderBy:l,orderType:r,total:i.total}),this.loadTagGroupTableData()},tagGroupTableDataFiledsConverter:function(e){var t=[];return $.each(e,function(e,a){t.push({key:a.id,id:a.id,name:a.name,create_time:a.createTime,update_time:a.updateTime,status:a.status})}.bind(this)),t},loadTagGroupTableData:function(){this.updateTagGroupTableLoading(!0),this.updateTagGroupTableRefreshBtnLoading(!0);var e=this.state.tagGroupTable,t=e.page,a=e.query,i=t.orderType;"descend"==i&&(i="desc"),"ascend"==i&&(i="asc"),t.orderType=i,s.ajax.get({url:this.state.tagGroupTable.dataSourceUrl,data:$.extend(t,a),success:function(e){var t=e.data.list,a=this.tagGroupTableDataFiledsConverter(t);this.updateTagGroupTableOriginalData(t),this.updateTagGroupTableData(a);var i=this.state.tagGroupTable.page;this.updateTagGroupTablePage({start:i.start,size:i.size,orderBy:i.orderBy,orderType:i.orderType,total:e.data.total})}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),error:function(){}.bind(this),complete:function(){this.updateTagGroupTableLoading(!1),this.updateTagGroupTableRefreshBtnLoading(!1)}.bind(this)})},updateEchoData:function(e){var t=this.state;t.editDialog.echoData=e,this.setState(t)},showEditDialog:function(e){e=s.commons.getObjByKey(this.state.tagGroupTable.originalData,"id",e.id),this.updateEchoData(e),this.getTagGroupEditDialog().showDialog(e)},onEditSuccess:function(e){var t=s.commons.updateObjByKey(this.state.tagGroupTable.originalData,"id",e.id,e);this.updateTagGroupTableOriginalData(t);var a=this.tagGroupTableDataFiledsConverter(t);this.updateTagGroupTableData(a)},onAddSuccess:function(){this.loadTagGroupTableData()},deleteRecord:function(e){var t=l.message.loading(i);this.updateTagGroupTableBatchDeleteLoading(!0);var a=this.state.tagGroupTable,i=a.deletingTip,n=a.delTagGroupUrl;s.ajax.delete({url:n,data:{deletedIds:e.join(",")},complete:function(){t(),this.updateTagGroupTableBatchDeleteLoading(!1)}.bind(this),success:function(t){l.message.success(t.msg),this.removeTagGroupTableSelectedRowKeys(e),this.loadTagGroupTableData()}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),error:function(){}})},showAddDialog:function(){this.getTagGroupAddDialog().showDialog()},showTagAddDialog:function(e){this.getTagAddDialog().showDialog(e)},onTagAddSuccess:function(e){window.EventsDispatcher.onTagAddSuccess(e)},getTagAddDialog:function(){return this.refs.tag_add_dialog},getTagGroupAddDialog:function(){return this.refs.tagGroup_add_dialog},getTagGroupEditDialog:function(){return this.refs.tagGroup_edit_dialog},expandedRowRender:function(e){return o.default.createElement(u.default,{tagGroupId:e.id})},render:function(){var e=this,t=this.state.tagGroupTable,a=t.title,i=t.scroll,n=t.expandRowByClick,r=t.selectedRowKeys,s=t.columns,d=t.data,u=t.page,c=t.tableLoading,f=t.batchDeleteBtnLoading,h=t.refreshBtnLoading,b=t.bordered,v=this.state.editDialog.echoData,T={onChange:function(t,a){e.updateTagGroupTableSelectedRowKeys(t)},onSelect:function(e,t,a){},onSelectAll:function(e,t,a){}},y=r.length>0;return o.default.createElement("div",null,o.default.createElement("div",{style:{marginBottom:16}},o.default.createElement(l.Button,{loading:h,onClick:function(){e.loadTagGroupTableData(),window.EventsDispatcher.loadTagTableData()}},"刷新"),o.default.createElement(l.Button,{style:{marginLeft:8},type:"primary",onClick:this.showAddDialog},"添加"),o.default.createElement(l.Popconfirm,{title:"确认删除 ? ",okText:"删除",cancelText:"取消",onConfirm:function(){return e.deleteRecord(r)}},o.default.createElement(l.Button,{style:{marginLeft:8},type:"danger",disabled:!y,loading:f},"批量删除")),o.default.createElement("span",{style:{marginLeft:8}},y?"选择了 "+r.length+" 个选项":"")),o.default.createElement(l.Table,{className:"components-table-demo-nested",scroll:i,expandedRowRender:this.expandedRowRender,expandRowByClick:n,locale:{emptyText:"暂无相关标签分组数据"},columns:s,rowSelection:T,dataSource:d,pagination:{total:u.total,showTotal:function(e,t){return"第 "+t[0]+"-"+t[1]+" 条记录 , 共 "+e+" 条记录"},pageSize:u.size,defaultCurrent:1},loading:c,onChange:this.handleTableChange,bordered:b,title:function(){return a}}),o.default.createElement(m.default,{ref:"tagGroup_edit_dialog",echoData:v,onEditSuccess:this.onEditSuccess}),o.default.createElement(g.default,{ref:"tagGroup_add_dialog",onAddSuccess:this.onAddSuccess}),o.default.createElement(p.default,{ref:"tag_add_dialog",onAddSuccess:this.onTagAddSuccess}))}}));t.default=(0,r.withRouter)(b)},function(e,t){},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1);a(17),a(2);var r=a(3),s=a(62),d=i(s),u=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Slider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea,o.default.createClass({displayName:"TagTable",getInitialState:function(){return{tagTable:{dataSourceUrl:"/tag/info/",bordered:!1,tableLoading:!1,columns:[],data:[],originalData:[],echoData:{},deletingTip:"正在删除",delTagUrl:"/tag/info"}}},componentDidMount:function(){this.loadData(),this.registEvents()},registEvents:function(){var e=this,t=this.props.tagGroupId;window.eventEmitter.on("onTagAddSuccess",function(a){a.tagGroupId==t&&e.loadData()}),window.eventEmitter.on("loadTagTableData",function(){e.loadData()})},updateTableLoading:function(e){var t=this.state;t.tagTable.tableLoading=e,this.setState(t)},updateTableColumns:function(e){var t=this.state;t.tagTable.columns=e,this.setState(t)},updateTableData:function(e){var t=this.state;t.tagTable.data=e,this.setState(t)},updateOriginalData:function(e){var t=this.state;t.tagTable.originalData=e,this.setState(t)},updateTableEchoData:function(e){var t=this.state;t.tagTable.echoData=e,this.setState(t)},dataConverter:function(e){for(var t=[],a=0;a<e.length;++a){var i=e[a];t.push({key:a,id:i.id,name:i.name,status:i.status,create_time:i.createTime,update_time:i.updateTime})}return t},showEditDialog:function(e){e=r.commons.getObjByKey(this.state.tagTable.originalData,"id",e.id),this.updateTableEchoData(e),this.getEditDialog().showDialog(e)},getEditDialog:function(){return this.refs.edit_dialog},deleteRecord:function(e){var t=l.message.loading(i),a=this.state.tagTable,i=a.deletingTip,n=a.delTagUrl;r.ajax.delete({url:n,data:{deletedIds:e.join(",")},complete:function(){t()}.bind(this),success:function(e){l.message.success(e.msg),this.loadData()}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),error:function(){}})},loadData:function(){var e=this;this.updateTableLoading(!0);var t=this.state.tagTable.dataSourceUrl,a=this.props.tagGroupId;r.ajax.get({url:t+a,success:function(e){var t=e.data.list,a=this.dataConverter(t);this.updateOriginalData(t),this.updateTableData(a)}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),error:function(){}.bind(this),complete:function(){this.updateTableLoading(!1)}.bind(this)});var i=[{title:"id",dataIndex:"id",key:"id",width:100},{title:"标签名称",dataIndex:"name",key:"name",width:100},{title:"状态",dataIndex:"status",key:"status",width:100,render:function(e){return r.commons.getStatusStrByIndex({index:e})}},{title:"创建时间",dataIndex:"create_time",key:"create_time",width:100,render:function(e){return timeFormatter.formatTime(timeFormatter.int2Long(e))}},{title:"最后更新时间",dataIndex:"update_time",key:"update_time",width:100,render:function(e){return timeFormatter.formatTime(timeFormatter.int2Long(e))}},{title:"操作",dataIndex:"operation",key:"operation",width:100,render:function(t,a){var i=o.default.createElement(l.Menu,null,o.default.createElement(l.Menu.Item,null,o.default.createElement("a",{onClick:function(){return e.showEditDialog(a)},href:"javascript:void(0);"},"编辑")),o.default.createElement(l.Menu.Item,null,o.default.createElement(l.Popconfirm,{title:"确认删除 ? ",okText:"删除",cancelText:"取消",onConfirm:function(){return e.deleteRecord([a.id])}},o.default.createElement("a",{href:"javascript:void(0)"},"删除"))));return o.default.createElement("span",{className:"table-operation"},o.default.createElement(l.Dropdown,{overlay:i},o.default.createElement("a",{href:"javascript:void(0);"},"操作 ",o.default.createElement(l.Icon,{type:"down"}))))}}];this.updateTableColumns(i)},onEditSuccess:function(e){this.loadData()},render:function(){var e=this.state.tagTable,t=e.bordered,a=e.columns,i=e.data,n=e.tableLoading,r=e.echoData;return o.default.createElement("div",null,o.default.createElement(l.Table,{className:"components-table-demo-nested",bordered:t,loading:n,columns:a,dataSource:i,pagination:!1}),o.default.createElement(d.default,{ref:"edit_dialog",echoData:r,onEditSuccess:this.onEditSuccess}))}}));t.default=u},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1);a(2);var r=a(3),s=a(5),d=i(s),u=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Sider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea,o.default.createClass({displayName:"TagEditDialog",getInitialState:function(){return{width:400,title:"修改标签信息",editUrl:"/tag/info",tipOfEditing:"正在保存标签修改",echoData:{}}},showDialog:function(e){this.getTagEditDialog().showDialog()},getTagEditDialog:function(){return this.refs.tag_edit_dialog},handleSubmit:function(e){var t=this.state,a=t.editUrl,i=t.tipOfEditing,n=l.message.loading(i,0);e=function(e){return e}(e),r.ajax.put({url:a,data:e,success:function(e){var t=this.props.onEditSuccess;l.message.success(e.msg),this.getTagEditDialog().closeDialog(),isUndefined(t)||t(e.data.tag),this.getTagEditDialog().clearForm()}.bind(this),failure:function(e){l.message.error(e.msg)},complete:function(){n(),this.getTagEditDialog().formLeaveLoading()}.bind(this)})},handleCancel:function(){this.getTagEditDialog().clearForm()},componentDidMount:function(){},render:function(){var e=this.props.echoData,t=this.state,a=t.title,i=t.width;e=r.commons.clone(e);e=function(e){return isUndefined(e)?{}:(isUndefined(e.createTime)||(e.createTime=timeFormatter.formatTime(timeFormatter.int2Long(e.createTime))),isUndefined(e.updateTime)||(e.updateTime=timeFormatter.formatTime(timeFormatter.int2Long(e.updateTime))),e)}(e);var n=[{cols:[{col:{span:11},label:"id",id:"id",config:{initialValue:e.id},input:o.default.createElement(l.Input,{autoComplete:"off",disabled:!0})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"名称",id:"name",config:{initialValue:e.name,rules:[{required:!0,message:"请输入标签名称!"}]},input:o.default.createElement(l.Input,{placeholder:"请输入标签名称",name:"name"})}]},{cols:[{col:{span:11},label:"状态",id:"status",config:{initialValue:e.status,rules:[{required:!0,message:"请输入状态!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入状态"},r.commons.getStatusOptions())},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"创建时间",id:"ignore_createTime",config:{initialValue:e.createTime},input:o.default.createElement(l.Input,{disabled:!0})}]},{cols:[{col:{span:11},label:"最后更新时间",id:"ignore_updateTime",config:{initialValue:e.updateTime},input:o.default.createElement(l.Input,{disabled:!0})},{col:{span:2},input:o.default.createElement("div",null)}]}];return o.default.createElement(d.default,{width:i,title:a,formRows:n,formLayout:"horizontal",handleSubmit:this.handleSubmit,handleCancel:this.handleCancel,ref:"tag_edit_dialog"})}}));t.default=u},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(6);i(r),a(4);a(8),a(2);var s=a(3),d=a(5),u=i(d),c=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Sider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea,o.default.createClass({displayName:"TagGroupEditDialog",getInitialState:function(){return{width:400,title:"修改标签组信息",editUrl:"/tagGroup/info",tipOfEditing:"正在保存标签组修改"}},showDialog:function(e){this.getTagGroupEditDialog().showDialog()},getTagGroupEditDialog:function(){return this.refs.movie_edit_dialog},handleSubmit:function(e){var t=this.state,a=t.editUrl,i=t.tipOfEditing,n=l.message.loading(i,0);e=function(e){return e}(e),s.ajax.put({url:a,data:e,success:function(e){var t=this.props.onEditSuccess;l.message.success(e.msg),this.getTagGroupEditDialog().closeDialog(),isUndefined(t)||t(e.data.tagGroup),this.getTagGroupEditDialog().clearForm()}.bind(this),failure:function(e){l.message.error(e.msg)},complete:function(){n(),this.getTagGroupEditDialog().formLeaveLoading()}.bind(this)})},handleCancel:function(){this.getTagGroupEditDialog().clearForm()},componentDidMount:function(){},render:function(){var e=this.props.echoData,t=this.state,a=t.title,i=t.width;e=s.commons.clone(e);e=function(e){return isUndefined(e)?{}:(isUndefined(e.createTime)||(e.createTime=timeFormatter.formatTime(timeFormatter.int2Long(e.createTime))),isUndefined(e.updateTime)||(e.updateTime=timeFormatter.formatTime(timeFormatter.int2Long(e.updateTime))),e)}(e);var n=[{cols:[{col:{span:11},label:"id",id:"id",config:{initialValue:e.id},input:o.default.createElement(l.Input,{autoComplete:"off",disabled:!0})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"名称",id:"name",config:{initialValue:e.name,rules:[{required:!0,message:"请输入标签分组名称!"}]},input:o.default.createElement(l.Input,{placeholder:"请输入标签分组名称",name:"name"})}]},{cols:[{col:{span:11},label:"状态",id:"status",config:{initialValue:e.status,rules:[{required:!0,message:"请输入状态!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入状态"},s.commons.getStatusOptions())},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"创建时间",id:"ignore_createTime",config:{initialValue:e.createTime},input:o.default.createElement(l.Input,{disabled:!0})}]},{cols:[{col:{span:11},label:"最后更新时间",id:"ignore_updateTime",config:{initialValue:e.updateTime},input:o.default.createElement(l.Input,{disabled:!0})},{col:{span:2},input:o.default.createElement("div",null)}]}];return o.default.createElement(u.default,{width:i,title:a,formRows:n,formLayout:"horizontal",handleSubmit:this.handleSubmit,handleCancel:this.handleCancel,ref:"movie_edit_dialog"})}}));t.default=c},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(6);i(r),a(4);a(2);var s=a(3),d=a(5),u=i(d),c=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Sider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea,o.default.createClass({displayName:"TagGroupAddDialog",getInitialState:function(){return{title:"添加标签分组",addTagGroupUrl:"/tagGroup/info",tipOfAddingTagGroup:"正在标签分组"}},showDialog:function(){this.getTagGroupAddDialog().showDialog()},getTagGroupAddDialog:function(){return this.refs.tagGroup_add_dialog},handleSubmit:function(e){var t=this.state.tipOfAddingTagGroup,a=l.message.loading(t,0),i=this.state.addTagGroupUrl;e=function(e){return e}(e),s.ajax.post({url:i,data:e,success:function(e){var t=this.props.onAddSuccess;l.message.success(e.msg),this.getTagGroupAddDialog().closeDialog(),isUndefined(t)||t(e.data.tagGroup),this.getTagGroupAddDialog().clearForm()}.bind(this),failure:function(e){l.message.error(e.msg)},complete:function(){a(),this.getTagGroupAddDialog().formLeaveLoading()}.bind(this)})},handleCancel:function(){},componentDidMount:function(){},render:function(){var e=this.state.title,t=[{cols:[{col:{span:11},label:"名称",id:"name",config:{rules:[{required:!0,message:"请输入标签分组名称!"}]},input:o.default.createElement(l.Input,{placeholder:"请输入标签分组名称",name:"name"})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"状态",id:"status",config:{rules:[{required:!0,message:"请输入状态!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入状态"},s.commons.getStatusOptions())}]}];return o.default.createElement(u.default,{title:e,formRows:t,handleSubmit:this.handleSubmit,handleCancel:this.handleCancel,ref:"tagGroup_add_dialog"})}}));t.default=c},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(6);i(r),a(4);a(2);var s=a(3),d=a(5),u=i(d),c=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Sider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea,o.default.createClass({displayName:"TagAddDialog",getInitialState:function(){return{title:"添加标签",addTagUrl:"/tag/info",tipOfAddingTag:"正在标签",echoData:{}}},showDialog:function(e){this.updateEchoData(e),this.getTagAddDialog().showDialog()},updateEchoData:function(e){this.setState({echoData:e})},getTagAddDialog:function(){return this.refs.tag_add_dialog},handleSubmit:function(e){var t=this.state.tipOfAddingTag,a=l.message.loading(t,0),i=this.state.addTagUrl;e=function(e){return e}(e),s.ajax.post({url:i,data:e,success:function(e){var t=this.props.onAddSuccess;l.message.success(e.msg),this.getTagAddDialog().closeDialog(),isUndefined(t)||t(e.data.tag),this.getTagAddDialog().clearForm()}.bind(this),failure:function(e){l.message.error(e.msg)},complete:function(){a(),this.getTagAddDialog().formLeaveLoading()}.bind(this)})},handleCancel:function(){this.getTagAddDialog().clearForm()},componentDidMount:function(){},render:function(){var e=this.state,t=e.title,a=e.echoData,i=[{cols:[{col:{span:11},label:"所属标签组id",id:"tagGroupId",config:{initialValue:a.id,rules:[{required:!0}]},input:o.default.createElement(l.Input,{disabled:!0})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"所属标签组",id:"ignore_tagGroupName",config:{initialValue:a.name,rules:[{required:!0}]},input:o.default.createElement(l.Input,{disabled:!0})}]},{cols:[{col:{span:11},label:"名称",id:"name",config:{rules:[{required:!0,message:"请输入标签名称!"}]},input:o.default.createElement(l.Input,{placeholder:"请输入标签名称",name:"name"})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"状态",id:"status",config:{rules:[{required:!0,message:"请输入状态!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入状态"},s.commons.getStatusOptions())}]}];return o.default.createElement(u.default,{title:t,formRows:i,handleSubmit:this.handleSubmit,handleCancel:this.handleCancel,ref:"tag_add_dialog"})}}));t.default=c},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(4);a(18),a(2);var s=a(67),d=i(s),u=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Slider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea,o.default.createClass({displayName:"AdminPage",getInitialState:function(){return{}},render:function(){return o.default.createElement("div",null,o.default.createElement(d.default,null))}}));t.default=(0,r.withRouter)(u)},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(4);a(68),a(2);var s=a(3),d=a(69),u=i(d),c=a(70),m=i(c),f=a(71),g=i(f),h=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Slider,l.Menu.SubMenu,l.Input.Search),p=(l.Input.TextArea,o.default.createClass({displayName:"AdminTable",getInitialState:function(){return{adminEditDialog:{echoData:void 0},adminTable:{title:"管理员列表",dataSourceUrl:"/admin/info/list",delAdminUrl:"/admin/info",scroll:{x:!0,y:450},editable:!1,haveSearchAdminname:!1,adminnameDropdownVisible:!1,bordered:!1,tableLoading:!1,batchDeleteBtnLoading:!1,refreshBtnLoading:!1,selectedRowKeys:[],data:[],originalData:[],page:{start:0,size:5,orderBy:"",orderType:"",total:0},query:{username:""},columns:[],deletingTip:"正在删除"}}},showAdminLoginLogsDialog:function(e){this.getAdminLoginLogsDialog().showDialog(e)},getAdminLoginLogsDialog:function(){return this.refs.admin_login_logs_dialog},onSearchAdminname:function(e){this.updateNameOfQuery(e),isEmptyString(this.state.adminTable.query.username)?this.updateAdminTableHaveSearchAdminname(!1):this.updateAdminTableHaveSearchAdminname(!0),this.loadAdminTableData()},updateAdminTableHaveSearchAdminname:function(e){var t=this.state;t.adminTable.haveSearchAdminname=e,this.setState(t)},updateAdminTableAdminnameDropdownVisible:function(e){var t=this.state;t.adminTable.adminnameDropdownVisible=e,this.setState(t)},updateAdminTableSelectedRowKeys:function(e){var t=this.state;t.adminTable.selectedRowKeys=e,this.setState(t)},removeAdminTableSelectedRowKeys:function(e){var t=this.state.adminTable.selectedRowKeys;t=t.removeByList(e),this.updateAdminTableSelectedRowKeys(t)},updateNameOfQuery:function(e){var t=this.state;t.adminTable.query.username=e,this.setState(t)},updateAdminTableData:function(e){var t=this.state;t.adminTable.data=e,this.setState(t)},updateAdminTableBatchDeleteLoading:function(e){var t=this.state;t.adminTable.batchDeleteBtnLoading=e,this.setState(t)},updateAdminTableRefreshBtnLoading:function(e){var t=this.state;t.adminTable.refreshBtnLoading=e,this.setState(t)},updateAdminTablePage:function(e){var t=this.state;t.adminTable.page=e,this.setState(t)},updateAdminTableQuery:function(e){var t=this.state;t.adminTable.query=e,this.setState(t)},updateAdminTableLoading:function(e){var t=this.state;t.adminTable.tableLoading=e,this.setState(t)},updateAdminTableColumns:function(e){var t=this.state;t.adminTable.columns=e,this.setState(t)},updateAdminTableOriginalData:function(e){var t=this.state;t.adminTable.originalData=e,this.setState(t)},updateAdminEditDialogEchoData:function(e){var t=this.state;t.adminEditDialog.echoData=e,this.setState(t)},showAdminImgUploaderDialog:function(e){this.getAdminImgUploaderDialog().showDialog(),this.getAdminImgUploaderDialog().previewImg(s.commons.generateImgUrl({imgUrl:e.imgUrl,width:300})),this.getAdminImgUploaderDialog().updateExtraInfo(e)},componentDidMount:function(){var e=this;this.updateAdminTableColumns([{title:"id",width:80,dataIndex:"id",sorter:!0},{title:"名称",width:120,dataIndex:"username",render:function(t,a){return s.commons.highLight(t,e.state.adminTable.query.username)},sorter:!0,filterDropdown:o.default.createElement("div",{className:"custom-filter-dropdown"},o.default.createElement(h,{placeholder:"搜索管理员名称",onSearch:this.onSearchAdminname,style:{width:200}})),filterIcon:o.default.createElement(l.Icon,{type:"search",style:{color:this.state.adminTable.haveSearchAdminname?"#108ee9":"#aaa"}})},{title:"内置对象",width:100,dataIndex:"immutable",render:function(e){return s.commons.getImmutableStrByIndex({index:e})}},{title:"密码",width:120,dataIndex:"password"},{title:"状态",width:80,dataIndex:"status",render:function(e){return s.commons.getStatusStrByIndex({index:e})},sorter:!0},{title:"更新时间",width:80,dataIndex:"update_time",render:function(e){return timeFormatter.formatTime(timeFormatter.int2Long(e))},sorter:!0},{title:"创建时间",width:80,dataIndex:"create_time",render:function(e){return timeFormatter.formatTime(timeFormatter.int2Long(e))},sorter:!0},{title:"操作",dataIndex:"operation",width:80,render:function(t,a){var i=1==a.immutable,n=i?{textDecoration:"line-through",color:"red"}:{},r=o.default.createElement(l.Menu,null,o.default.createElement(l.Menu.Item,null,o.default.createElement("a",{onClick:function(){return e.showAdminLoginLogsDialog(a.id)},href:"javascript:void(0);"},"查看登录日志")),o.default.createElement(l.Menu.Item,null,o.default.createElement("a",{disabled:i,style:n,onClick:function(){return e.showEditDialog(a)},href:"javascript:void(0);"},"编辑")),o.default.createElement(l.Menu.Item,null,o.default.createElement(l.Popconfirm,{title:"确认删除 ? ",okText:"删除",cancelText:"取消",onConfirm:function(){return e.deleteRecord([a.id])}},o.default.createElement("a",{disabled:i,style:n,href:"javascript:void(0)"},"删除"))));return o.default.createElement("div",null,o.default.createElement(l.Dropdown,{overlay:r},o.default.createElement("a",{href:"javascript:void(0);"},"操作 ",o.default.createElement(l.Icon,{type:"down"}))))},sorter:!0}]),this.loadAdminTableData()},uploadAdminSrc:function(e){},handleTableChange:function(e,t,a){var i=this.state.adminTable.page,n=e.pageSize,o=(e.current-1)*n,l=isUndefined(a.field)?"":a.field,r=isUndefined(a.order)?"":a.order;this.updateAdminTablePage({start:o,size:n,orderBy:l,orderType:r,total:i.total}),this.loadAdminTableData()},adminTableDataFiledsConverter:function(e){var t=[];return $.each(e,function(e,a){t.push({key:a.id,id:a.id,username:a.username,immutable:a.immutable,password:a.password,description:a.description,create_time:a.createTime,update_time:a.updateTime,status:a.status})}.bind(this)),t},loadAdminTableData:function(){this.updateAdminTableLoading(!0),this.updateAdminTableRefreshBtnLoading(!0);var e=this.state.adminTable,t=e.page,a=e.query,i=t.orderType;"descend"==i&&(i="desc"),"ascend"==i&&(i="asc"),t.orderType=i,s.ajax.get({url:this.state.adminTable.dataSourceUrl,data:$.extend(t,a),success:function(e){var t=e.data.list,a=this.adminTableDataFiledsConverter(t);this.updateAdminTableOriginalData(t),this.updateAdminTableData(a);var i=this.state.adminTable.page;this.updateAdminTablePage({start:i.start,size:i.size,orderBy:i.orderBy,orderType:i.orderType,total:e.data.total})}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),error:function(){}.bind(this),complete:function(){this.updateAdminTableLoading(!1),this.updateAdminTableRefreshBtnLoading(!1)}.bind(this)})},showEditDialog:function(e){e=s.commons.getObjByKey(this.state.adminTable.originalData,"id",e.id),this.updateAdminEditDialogEchoData(e),this.getAdminEditDialog().showDialog(e)},deleteRecord:function(e){var t=l.message.loading(i);this.updateAdminTableBatchDeleteLoading(!0);var a=this.state.adminTable,i=a.deletingTip,n=a.delAdminUrl;s.ajax.delete({url:n,data:{deletedIds:e.join(",")},complete:function(){t(),this.updateAdminTableBatchDeleteLoading(!1)}.bind(this),success:function(t){l.message.success(t.msg),this.removeAdminTableSelectedRowKeys(e),this.loadAdminTableData()}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),error:function(){}})},showAddDialog:function(){this.getAdminAddDialog().showDialog()},getAdminAddDialog:function(){return this.refs.admin_add_dialog},getAdminEditDialog:function(){return this.refs.admin_edit_dialog},onEditSuccess:function(e){var t=s.commons.updateObjByKey(this.state.adminTable.originalData,"id",e.id,e);this.updateAdminTableOriginalData(t);var a=this.adminTableDataFiledsConverter(t);this.updateAdminTableData(a)},onAddSuccess:function(e){this.loadAdminTableData()},getAdminImgUploaderDialog:function(){return this.refs.admin_img_uploader_dialog},expandedRowRender:function(e){return o.default.createElement("span",null,"简介 ：",o.default.createElement("p",{style:{margin:0}},e.description))},render:function(){var e=this,t=this.state.adminEditDialog.echoData,a=this.state.adminTable,i=a.title,n=a.scroll,r=a.selectedRowKeys,s=a.columns,d=a.data,c=a.page,f=a.tableLoading,h=a.batchDeleteBtnLoading,p=a.refreshBtnLoading,b=a.bordered,v={onChange:function(t,a){e.updateAdminTableSelectedRowKeys(t)},onSelect:function(e,t,a){},onSelectAll:function(e,t,a){}},T=r.length>0;return o.default.createElement("div",null,o.default.createElement("div",{style:{marginBottom:16}},o.default.createElement(l.Button,{loading:p,onClick:this.loadAdminTableData},"刷新"),o.default.createElement(l.Button,{style:{marginLeft:8},type:"primary",onClick:this.showAddDialog},"添加"),o.default.createElement(l.Popconfirm,{title:"确认删除 ? ",okText:"删除",cancelText:"取消",onConfirm:function(){return e.deleteRecord(r)}},o.default.createElement(l.Button,{style:{marginLeft:8},type:"danger",disabled:!T,loading:h},"批量删除")),o.default.createElement("span",{style:{marginLeft:8}},T?"选择了 "+r.length+" 个选项":"")),o.default.createElement(l.Table,{expandedRowRender:this.expandedRowRender,locale:{emptyText:"暂无用户数据"},columns:s,rowSelection:v,dataSource:d,pagination:{total:c.total,showTotal:function(e,t){return"第 "+t[0]+"-"+t[1]+" 条记录 , 共 "+e+" 条记录"},pageSize:c.size,defaultCurrent:1},loading:f,onChange:this.handleTableChange,bordered:b,title:function(){return i},scroll:n}),o.default.createElement(u.default,{ref:"admin_edit_dialog",echoData:t,onEditSuccess:this.onEditSuccess}),o.default.createElement(m.default,{ref:"admin_add_dialog",onAddSuccess:this.onAddSuccess}),o.default.createElement(g.default,{ref:"admin_login_logs_dialog"}))}}));t.default=(0,r.withRouter)(p)},function(e,t){},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1);a(2);var r=a(3),s=a(5),d=i(s),u=l.Select.Option,c=(l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Sider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea),m=o.default.createClass({displayName:"AdminEditDialog",getInitialState:function(){return{title:"修改管理员信息",editAdminUrl:"/admin/info",tipOfEditing:"正在保存管理员修改",roles:[],roleUrl:"/admin/role/info/all",selectRoleIds:[],selectRoleUrl:"/admin/role/id/list/byAdminId/"}},updateRoles:function(e){this.setState({roles:e})},updateSelectRoleIds:function(e){this.setState({selectRoleIds:e})},loadRolesData:function(e){var t=e.onSuccess,a=this.state.roleUrl;r.ajax.get({url:a,success:function(e){this.updateRoles(e.data.list),isUndefined(t)||t(e)}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),complete:function(){}.bind(this)})},loadSelectAuthIdsData:function(e){var t=this.state.selectRoleUrl;r.ajax.get({url:t+e,success:function(e){this.updateSelectRoleIds(e.data.list)}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),complete:function(){}.bind(this)})},showDialog:function(e){this.getAdminEditDialog().showDialog(),this.loadRolesData({onSuccess:function(){this.loadSelectAuthIdsData(e.id)}.bind(this)})},getAdminEditDialog:function(){return this.refs.admin_edit_dialog},handleSubmit:function(e){var t=this.state,a=t.editAdminUrl,i=t.tipOfEditing,n=l.message.loading(i,0);e=function(e){return isUndefined(e.roleIds)&&(e.roleIds=[]),e.roleIds=e.roleIds.join(","),e}(e),r.ajax.put({url:a,data:e,success:function(e){var t=this.props.onEditSuccess;l.message.success(e.msg),this.getAdminEditDialog().closeDialog(),isUndefined(t)||t(e.data.admin),this.getAdminEditDialog().clearForm()}.bind(this),failure:function(e){l.message.error(e.msg)},complete:function(){n(),this.getAdminEditDialog().formLeaveLoading()}.bind(this)})},handleCancel:function(){this.getAdminEditDialog().clearForm()},componentDidMount:function(){},updateConstellationObj:function(e){this.setState({constellationObj:e})},onBirthdayChange:function(e,t){this.props.echoData.constellation=r.commons.transConStrByDate(e._d)},render:function(){var e=this.props.echoData,t=this.state,a=t.title,i=t.roles,n=t.selectRoleIds;e=r.commons.clone(e),e=function(e){return isUndefined(e)?{}:(isUndefined(e.createTime)||(e.createTime=timeFormatter.formatTime(timeFormatter.int2Long(e.createTime))),isUndefined(e.updateTime)||(e.updateTime=timeFormatter.formatTime(timeFormatter.int2Long(e.updateTime))),e)}.bind(this)(e);var s=[];!isUndefined(i)&&i.length>=1&&(s=i.map(function(e,t){var a=e.id+"",i="角色："+e.roleName+"\r\n简介:"+e.description;return o.default.createElement(u,{title:i,key:e.id,value:a},e.roleName)}.bind(this)));var m=[{cols:[{col:{span:11},label:"id",id:"id",config:{initialValue:e.id},input:o.default.createElement(l.Input,{name:"id",autoComplete:"off",disabled:!0})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"名称",id:"username",config:{initialValue:e.username,rules:[{required:!0,message:"请输入管理员名称!"}]},input:o.default.createElement(l.Input,{placeholder:"请输入管理员名称",name:"name"})}]},{cols:[{col:{span:11},label:"状态",id:"status",config:{initialValue:e.status,rules:[{required:!0,message:"请输入状态!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入状态"},o.default.createElement(u,{value:"1"},"正常"),o.default.createElement(u,{value:"2"},"冻结"))},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"密码",id:"password",config:{initialValue:e.password,rules:[{required:!0,whitespace:!0,message:"请输入密码!"}]},input:o.default.createElement(l.Input,{autoComplete:"off",placeholder:"密码"})}]},{cols:[{col:{span:11},label:"创建时间",id:"ignore_createTime",config:{initialValue:e.createTime},input:o.default.createElement(l.Input,{disabled:!0})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"最后更新时间",id:"ignore_updateTime",config:{initialValue:e.updateTime},input:o.default.createElement(l.Input,{disabled:!0})}]},{cols:[{col:{span:24},label:"角色",id:"roleIds",config:{initialValue:r.commons.toStrArr(n),rules:[{required:!1,message:"请选择角色!"}]},input:o.default.createElement(l.Select,{showSearch:!0,mode:"multiple",optionFilterProp:"children",notFoundContent:"无相关角色",placeholder:"请选择角色",style:{width:"100%"}},s)}]},{cols:[{col:{span:24},label:"简介",id:"description",config:{initialValue:e.description,rules:[{required:!0,message:"请输入简介!"}]},input:o.default.createElement(c,{placeholder:"请输入简介",autosize:{minRows:4,maxRows:8}})}]}];return o.default.createElement(d.default,{title:a,formRows:m,formLayout:"horizontal",handleSubmit:this.handleSubmit,handleCancel:this.handleCancel,ref:"admin_edit_dialog"})}});t.default=m},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(6);i(r),a(4);a(2);var s=a(3),d=a(5),u=i(d),c=l.Select.Option,m=(l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Sider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea),f=o.default.createClass({displayName:"AdminAddDialog",getInitialState:function(){return{title:"添加管理员",addAdminUrl:"/admin/info",tipOfAddingAdmin:"正在添加管理员",roles:[],roleUrl:"/admin/role/info/all"}},updateRoles:function(e){this.setState({roles:e})},loadRolesData:function(){var e=this.state.roleUrl;s.ajax.get({url:e,success:function(e){this.updateRoles(e.data.list)}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),complete:function(){}.bind(this)})},showDialog:function(){this.getAdminAddDialog().showDialog(),this.loadRolesData()},getAdminAddDialog:function(){return this.refs.admin_add_dialog},handleSubmit:function(e){var t=this.state.tipOfAddingAdmin,a=l.message.loading(t,0),i=this.state.addAdminUrl;e=function(e){return isUndefined(e.roleIds)&&(e.roleIds=[]),e.roleIds=e.roleIds.join(","),e}(e),s.ajax.post({url:i,data:e,success:function(e){var t=this.props.onAddSuccess;l.message.success(e.msg),this.getAdminAddDialog().closeDialog(),isUndefined(t)||t(e.data.admin),this.getAdminAddDialog().clearForm()}.bind(this),failure:function(e){l.message.error(e.msg)},complete:function(){a(),this.getAdminAddDialog().formLeaveLoading()}.bind(this)})},handleCancel:function(){},componentDidMount:function(){},render:function(){var e=this.state,t=e.title,a=e.roles,i=[];!isUndefined(a)&&a.length>=1&&(i=a.map(function(e,t){var a=e.id+"",i="角色："+e.roleName+"\r\n简介:"+e.description;return o.default.createElement(c,{title:i,key:e.id,value:a},e.roleName)}.bind(this)));var n=[{cols:[{col:{span:11},label:"名称",id:"username",config:{rules:[{required:!0,message:"请输入管理员名称!"}]},input:o.default.createElement(l.Input,{placeholder:"请输入管理员名称"})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"状态",id:"status",config:{rules:[{required:!0,message:"请输入状态!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入状态"},o.default.createElement(c,{value:"1"},"正常"),o.default.createElement(c,{value:"2"},"冻结"))}]},{cols:[{col:{span:11},label:"密码",id:"password",config:{rules:[{required:!0,message:"请输入管理员密码!"}]},input:o.default.createElement(l.Input,{placeholder:"请输入管理员密码"})},{col:{span:2},input:o.default.createElement("div",null)}]},{cols:[{col:{span:24},label:"角色",id:"roleIds",config:{rules:[{required:!1,message:"请选择角色!"}]},input:o.default.createElement(l.Select,{showSearch:!0,mode:"multiple",optionFilterProp:"children",notFoundContent:"无相关角色",placeholder:"请选择角色",style:{width:"100%"}},i)}]},{cols:[{col:{span:24},label:"简介",id:"description",config:{rules:[{required:!0,message:"请输入简介!"}]},input:o.default.createElement(m,{placeholder:"请输入简介",autosize:{minRows:4,maxRows:8}})}]}];return o.default.createElement(u.default,{title:t,formRows:n,handleSubmit:this.handleSubmit,handleCancel:this.handleCancel,ref:"admin_add_dialog"})}});t.default=f},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(7),o=(i(n),a(0)),l=i(o),r=a(1);a(4);a(2);var s=a(19),d=i(s),u=l.default.createClass({displayName:"AdminLoginLogsDialog",getInitialState:function(){return{visible:!1,title:"管理员登录日志",width:1111}},showDialog:function(e){this.setState({visible:!0}),setTimeout(function(){this.getAdminLoginLogsTable().loadDataByAdminId(e)}.bind(this),10)},handleCancel:function(){this.setState({visible:!1})},getAdminLoginLogsTable:function(){return this.refs.admin_login_logs_table},render:function(){var e=this.state,t=e.visible,a=e.title,i=e.width;return l.default.createElement(r.Modal,{id:"admin_login_logs_dialog",visible:t,title:a,width:i,onCancel:this.handleCancel,footer:null},l.default.createElement(d.default,{ref:"admin_login_logs_table"}))}});t.default=u},function(e,t){},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(4);a(74),a(2);var s=a(75),d=i(s),u=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Slider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea,o.default.createClass({displayName:"RolePage",getInitialState:function(){return{}},render:function(){return o.default.createElement("div",null,o.default.createElement(d.default,null))}}));t.default=(0,r.withRouter)(u)},function(e,t){},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(4);a(76),a(2);var s=a(3),d=a(77),u=i(d),c=a(78),m=i(c),f=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Slider,l.Menu.SubMenu,l.Input.Search),g=(l.Input.TextArea,o.default.createClass({displayName:"RoleTable",getInitialState:function(){return{roleEditDialog:{echoData:void 0},roleTable:{title:"角色列表",dataSourceUrl:"/admin/role/info/list",delRoleUrl:"/admin/role/info",scroll:{x:!0,y:450},editable:!1,haveSearchRolename:!1,rolenameDropdownVisible:!1,bordered:!1,tableLoading:!1,batchDeleteBtnLoading:!1,refreshBtnLoading:!1,selectedRowKeys:[],data:[],originalData:[],page:{start:0,size:5,orderBy:"",orderType:"",total:0},query:{roleName:""},columns:[],deletingTip:"正在删除"}}},onSearchRolename:function(e){this.updateNameOfQuery(e),isEmptyString(this.state.roleTable.query.roleName)?this.updateRoleTableHaveSearchRolename(!1):this.updateRoleTableHaveSearchRolename(!0),this.loadRoleTableData()},updateRoleTableHaveSearchRolename:function(e){var t=this.state;t.roleTable.haveSearchRolename=e,this.setState(t)},updateRoleTableRolenameDropdownVisible:function(e){var t=this.state;t.roleTable.rolenameDropdownVisible=e,this.setState(t)},updateRoleTableSelectedRowKeys:function(e){var t=this.state;t.roleTable.selectedRowKeys=e,this.setState(t)},removeRoleTableSelectedRowKeys:function(e){var t=this.state.roleTable.selectedRowKeys;t=t.removeByList(e),this.updateRoleTableSelectedRowKeys(t)},updateNameOfQuery:function(e){var t=this.state;t.roleTable.query.roleName=e,this.setState(t)},updateRoleTableData:function(e){var t=this.state;t.roleTable.data=e,this.setState(t)},updateRoleTableBatchDeleteLoading:function(e){var t=this.state;t.roleTable.batchDeleteBtnLoading=e,this.setState(t)},updateRoleTableRefreshBtnLoading:function(e){var t=this.state;t.roleTable.refreshBtnLoading=e,this.setState(t)},updateRoleTablePage:function(e){var t=this.state;t.roleTable.page=e,this.setState(t)},updateRoleTableQuery:function(e){var t=this.state;t.roleTable.query=e,this.setState(t)},updateRoleTableLoading:function(e){var t=this.state;t.roleTable.tableLoading=e,this.setState(t)},updateRoleTableColumns:function(e){var t=this.state;t.roleTable.columns=e,this.setState(t)},updateRoleTableOriginalData:function(e){var t=this.state;t.roleTable.originalData=e,this.setState(t)},updateRoleEditDialogEchoData:function(e){var t=this.state;t.roleEditDialog.echoData=e,this.setState(t)},showRoleImgUploaderDialog:function(e){this.getRoleImgUploaderDialog().showDialog(),this.getRoleImgUploaderDialog().previewImg(s.commons.generateImgUrl({imgUrl:e.imgUrl,width:300})),this.getRoleImgUploaderDialog().updateExtraInfo(e)},componentDidMount:function(){var e=this;this.updateRoleTableColumns([{title:"id",width:80,dataIndex:"id",sorter:!0},{title:"名称",width:120,dataIndex:"role_name",render:function(t,a){return s.commons.highLight(t,e.state.roleTable.query.roleName)},sorter:!0,filterDropdown:o.default.createElement("div",{className:"custom-filter-dropdown"},o.default.createElement(f,{placeholder:"搜索角色名称",onSearch:this.onSearchRolename,style:{width:200}})),filterIcon:o.default.createElement(l.Icon,{type:"search",style:{color:this.state.roleTable.haveSearchRolename?"#108ee9":"#aaa"}})},{title:"内置对象",width:100,dataIndex:"immutable",render:function(e){return s.commons.getImmutableStrByIndex({index:e})}},{title:"状态",width:80,dataIndex:"status",render:function(e){return s.commons.getStatusStrByIndex({index:e})},sorter:!0},{title:"更新时间",width:80,dataIndex:"update_time",render:function(e){return timeFormatter.formatTime(timeFormatter.int2Long(e))},sorter:!0},{title:"创建时间",width:80,dataIndex:"create_time",render:function(e){return timeFormatter.formatTime(timeFormatter.int2Long(e))},sorter:!0},{title:"操作",dataIndex:"operation",width:80,render:function(t,a){var i=1==a.immutable,n=i?{textDecoration:"line-through",color:"red"}:{},r=o.default.createElement(l.Menu,null,o.default.createElement(l.Menu.Item,null,o.default.createElement("a",{disabled:i,style:n,onClick:function(){return e.showEditDialog(a)},href:"javascript:void(0);"},"编辑")),o.default.createElement(l.Menu.Item,null,o.default.createElement(l.Popconfirm,{title:"确认删除 ? ",okText:"删除",cancelText:"取消",onConfirm:function(){return e.deleteRecord([a.id])}},o.default.createElement("a",{disabled:i,style:n,href:"javascript:void(0)"},"删除"))));return o.default.createElement("div",null,o.default.createElement(l.Dropdown,{overlay:r},o.default.createElement("a",{href:"javascript:void(0);"},"操作 ",o.default.createElement(l.Icon,{type:"down"}))))},sorter:!0}]),this.loadRoleTableData()},uploadRoleSrc:function(e){},handleTableChange:function(e,t,a){var i=this.state.roleTable.page,n=e.pageSize,o=(e.current-1)*n,l=isUndefined(a.field)?"":a.field,r=isUndefined(a.order)?"":a.order;this.updateRoleTablePage({start:o,size:n,orderBy:l,orderType:r,total:i.total}),this.loadRoleTableData()},roleTableDataFiledsConverter:function(e){var t=[];return $.each(e,function(e,a){t.push({key:a.id,id:a.id,role_name:a.roleName,immutable:a.immutable,description:a.description,create_time:a.createTime,update_time:a.updateTime,status:a.status})}.bind(this)),t},loadRoleTableData:function(){this.updateRoleTableLoading(!0),this.updateRoleTableRefreshBtnLoading(!0);var e=this.state.roleTable,t=e.page,a=e.query,i=t.orderType;"descend"==i&&(i="desc"),"ascend"==i&&(i="asc"),t.orderType=i,s.ajax.get({url:this.state.roleTable.dataSourceUrl,data:$.extend(t,a),success:function(e){var t=e.data.list,a=this.roleTableDataFiledsConverter(t);this.updateRoleTableOriginalData(t),this.updateRoleTableData(a);var i=this.state.roleTable.page;this.updateRoleTablePage({start:i.start,size:i.size,orderBy:i.orderBy,orderType:i.orderType,total:e.data.total})}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),error:function(){}.bind(this),complete:function(){this.updateRoleTableLoading(!1),this.updateRoleTableRefreshBtnLoading(!1)}.bind(this)})},showEditDialog:function(e){e=s.commons.getObjByKey(this.state.roleTable.originalData,"id",e.id),this.updateRoleEditDialogEchoData(e),this.getRoleEditDialog().showDialog(e)},deleteRecord:function(e){var t=l.message.loading(i);this.updateRoleTableBatchDeleteLoading(!0);var a=this.state.roleTable,i=a.deletingTip,n=a.delRoleUrl;s.ajax.delete({url:n,data:{deletedIds:e.join(",")},complete:function(){t(),this.updateRoleTableBatchDeleteLoading(!1)}.bind(this),success:function(t){l.message.success(t.msg),this.removeRoleTableSelectedRowKeys(e),this.loadRoleTableData()}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),error:function(){}})},showAddDialog:function(){this.getRoleAddDialog().showDialog()},getRoleAddDialog:function(){return this.refs.role_add_dialog},getRoleEditDialog:function(){return this.refs.role_edit_dialog},onEditSuccess:function(e){var t=s.commons.updateObjByKey(this.state.roleTable.originalData,"id",e.id,e);this.updateRoleTableOriginalData(t);var a=this.roleTableDataFiledsConverter(t);this.updateRoleTableData(a)},onAddSuccess:function(e){this.loadRoleTableData()},getRoleImgUploaderDialog:function(){return this.refs.role_img_uploader_dialog},expandedRowRender:function(e){return o.default.createElement("span",null,"简介 ：",o.default.createElement("p",{style:{margin:0}},e.description))},render:function(){var e=this,t=this.state.roleEditDialog.echoData,a=this.state.roleTable,i=a.title,n=a.scroll,r=a.selectedRowKeys,s=a.columns,d=a.data,c=a.page,f=a.tableLoading,g=a.batchDeleteBtnLoading,h=a.refreshBtnLoading,p=a.bordered,b={onChange:function(t,a){e.updateRoleTableSelectedRowKeys(t)},onSelect:function(e,t,a){},onSelectAll:function(e,t,a){}},v=r.length>0;return o.default.createElement("div",null,o.default.createElement("div",{style:{marginBottom:16}},o.default.createElement(l.Button,{loading:h,onClick:this.loadRoleTableData},"刷新"),o.default.createElement(l.Button,{style:{marginLeft:8},type:"primary",onClick:this.showAddDialog},"添加"),o.default.createElement(l.Popconfirm,{title:"确认删除 ? ",okText:"删除",cancelText:"取消",onConfirm:function(){return e.deleteRecord(r)}},o.default.createElement(l.Button,{style:{marginLeft:8},type:"danger",disabled:!v,loading:g},"批量删除")),o.default.createElement("span",{style:{marginLeft:8}},v?"选择了 "+r.length+" 个选项":"")),o.default.createElement(l.Table,{expandedRowRender:this.expandedRowRender,locale:{emptyText:"暂无用户数据"},columns:s,rowSelection:b,dataSource:d,pagination:{total:c.total,showTotal:function(e,t){return"第 "+t[0]+"-"+t[1]+" 条记录 , 共 "+e+" 条记录"},pageSize:c.size,defaultCurrent:1},loading:f,onChange:this.handleTableChange,bordered:p,title:function(){return i},scroll:n}),o.default.createElement(u.default,{ref:"role_edit_dialog",echoData:t,onEditSuccess:this.onEditSuccess}),o.default.createElement(m.default,{ref:"role_add_dialog",onAddSuccess:this.onAddSuccess}))}}));t.default=(0,r.withRouter)(g)},function(e,t){},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1);a(2);var r=a(3),s=a(5),d=i(s),u=l.Select.Option,c=l.Select.OptGroup,m=(l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Sider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea),f=o.default.createClass({displayName:"RoleEditDialog",getInitialState:function(){return{width:666,title:"修改角色信息",editRoleUrl:"/admin/role/info",tipOfEditing:"正在保存角色修改",auths:[],selectAuthIds:[],authUrl:"/admin/auth/info/all",selectAuthUrl:"/admin/auth/id/list/byRoleId/",menus:[],selectMenuIds:[],menuUrl:"/admin/menu/tree/all",selectMenuUrl:"/admin/menu/leaf/id/list/byRoleId/"}},updateAuths:function(e){this.setState({auths:e})},updateSelectAuthIds:function(e){this.setState({selectAuthIds:e})},loadAuthsData:function(e){var t=e.onSuccess,a=this.state.authUrl;r.ajax.get({url:a,success:function(e){this.updateAuths(e.data.list)}.bind(this),failure:function(e){l.message.error(e.msg),isUndefined(t)||t(e)}.bind(this),complete:function(){}.bind(this)})},loadSelectAuthIdsData:function(e){var t=this.state.selectAuthUrl;r.ajax.get({url:t+e,success:function(e){this.updateSelectAuthIds(e.data.list)}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),complete:function(){}.bind(this)})},updateMenus:function(e){this.setState({menus:e})},updateSelectMenuIds:function(e){this.setState({selectMenuIds:e})},loadMenusData:function(e){var t=e.onSuccess,a=this.state.menuUrl;r.ajax.get({url:a,success:function(e){this.updateMenus(e.data.tree)}.bind(this),failure:function(e){l.message.error(e.msg),isUndefined(t)||t(e)}.bind(this),complete:function(){}.bind(this)})},loadSelectMenuIdsData:function(e){var t=this.state.selectMenuUrl;r.ajax.get({url:t+e,success:function(e){this.updateSelectMenuIds(e.data.list)}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),complete:function(){}.bind(this)})},showDialog:function(e){var t=e.id;this.getRoleEditDialog().showDialog(),this.loadAuthsData({onSuccess:this.loadSelectAuthIdsData(t)}),this.loadMenusData({onSuccess:this.loadSelectMenuIdsData(t)})},getRoleEditDialog:function(){return this.refs.role_edit_dialog},handleSubmit:function(e){var t=this.state,a=t.editRoleUrl,i=t.tipOfEditing,n=l.message.loading(i,0);e=function(e){return isUndefined(e.authIds)&&(e.authIds=[]),e.authIds=e.authIds.join(","),isUndefined(e.menuIds)&&(e.menuIds=[]),e.menuIds=e.menuIds.join(","),e}(e),r.ajax.put({url:a,data:e,success:function(e){var t=this.props.onEditSuccess;l.message.success(e.msg),this.getRoleEditDialog().closeDialog(),isUndefined(t)||t(e.data.role),this.getRoleEditDialog().clearForm()}.bind(this),failure:function(e){l.message.error(e.msg)},complete:function(){n(),this.getRoleEditDialog().formLeaveLoading()}.bind(this)})},handleCancel:function(){this.getRoleEditDialog().clearForm()},componentDidMount:function(){},render:function(){var e=this.props.echoData,t=this.state,a=t.title,i=t.auths,n=t.selectAuthIds,s=t.menus,f=t.selectMenuIds,g=t.width;e=r.commons.clone(e),e=function(e){return isUndefined(e)?{}:(isUndefined(e.createTime)||(e.createTime=timeFormatter.formatTime(timeFormatter.int2Long(e.createTime))),isUndefined(e.updateTime)||(e.updateTime=timeFormatter.formatTime(timeFormatter.int2Long(e.updateTime))),e)}.bind(this)(e);var h=[];!isUndefined(i)&&i.length>=1&&(h=i.map(function(e,t){var a=e.id+"",i="权限："+e.authName+"\r\n简介:"+e.description;return o.default.createElement(u,{title:i,key:e.id,value:a},e.authName)}.bind(this)));var p=[];!isUndefined(s)&&s.length>=1&&(p=s.map(function(e,t){return o.default.createElement(c,{key:t,label:e.menuName},e.child.map(function(e,t){var a=e.id+"";return o.default.createElement(u,{key:e.id,value:a},e.menuName)}))}.bind(this)));var b=[{cols:[{col:{span:7},label:"id",id:"id",config:{initialValue:e.id},input:o.default.createElement(l.Input,{name:"id",autoComplete:"off",disabled:!0})},{col:{span:1},input:o.default.createElement("div",null)},{col:{span:7},label:"名称",id:"roleName",config:{initialValue:e.roleName,rules:[{required:!0,message:"请输入角色名称!"}]},input:o.default.createElement(l.Input,{placeholder:"请输入角色名称",name:"name"})},{col:{span:1},input:o.default.createElement("div",null)},{col:{span:7},label:"状态",id:"status",config:{initialValue:e.status,rules:[{required:!0,message:"请输入状态!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入状态"},o.default.createElement(u,{value:"1"},"正常"),o.default.createElement(u,{value:"2"},"冻结"))}]},{cols:[{col:{span:7},label:"创建时间",id:"ignore_createTime",config:{initialValue:e.createTime},input:o.default.createElement(l.Input,{disabled:!0})},{col:{span:1},input:o.default.createElement("div",null)},{col:{span:7},label:"最后更新时间",id:"ignore_updateTime",config:{initialValue:e.updateTime},input:o.default.createElement(l.Input,{disabled:!0})}]},{cols:[{col:{span:24},label:"权限",id:"authIds",config:{initialValue:r.commons.toStrArr(n),rules:[{required:!1,message:"请选择权限!"}]},input:o.default.createElement(l.Select,{showSearch:!0,mode:"multiple",optionFilterProp:"children",notFoundContent:"无相关权限",placeholder:"请选择权限",style:{width:"100%"}},h)}]},{cols:[{col:{span:24},label:"菜单",id:"menuIds",config:{initialValue:r.commons.toStrArr(f),rules:[{required:!1,message:"请选择菜单!"}]},input:o.default.createElement(l.Select,{showSearch:!0,mode:"multiple",optionFilterProp:"children",notFoundContent:"无相关菜单",placeholder:"请选择菜单",style:{width:"100%"}},p)}]},{cols:[{col:{span:24},label:"简介",id:"description",config:{initialValue:e.description,rules:[{required:!0,message:"请输入简介!"}]},input:o.default.createElement(m,{placeholder:"请输入简介",autosize:{minRows:4,maxRows:8}})}]}];return o.default.createElement(d.default,{title:a,width:g,formRows:b,formLayout:"horizontal",handleSubmit:this.handleSubmit,handleCancel:this.handleCancel,ref:"role_edit_dialog"})}});t.default=f},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1);a(2);var r=a(3),s=a(5),d=i(s),u=l.Select.Option,c=l.Select.OptGroup,m=(l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Sider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea),f=o.default.createClass({displayName:"RoleAddDialog",getInitialState:function(){return{title:"添加角色",addRoleUrl:"/admin/role/info",tipOfAddingRole:"正在添加角色",auths:[],authUrl:"/admin/auth/info/all",menus:[],menuUrl:"/admin/menu/tree/all"}},updateAuths:function(e){this.setState({auths:e})},loadAuthsData:function(){var e=this.state.authUrl;r.ajax.get({url:e,success:function(e){this.updateAuths(e.data.list)}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),complete:function(){}.bind(this)})},updateMenus:function(e){this.setState({menus:e})},loadMenusData:function(){var e=this.state.menuUrl;r.ajax.get({url:e,success:function(e){this.updateMenus(e.data.tree)}.bind(this),failure:function(e){l.message.error(e.msg)}.bind(this),complete:function(){}.bind(this)})},showDialog:function(){this.getRoleAddDialog().showDialog(),this.loadAuthsData(),this.loadMenusData()},getRoleAddDialog:function(){return this.refs.role_add_dialog},handleSubmit:function(e){var t=this.state.tipOfAddingRole,a=l.message.loading(t,0),i=this.state.addRoleUrl;e=function(e){return isUndefined(e.authIds)&&(e.authIds=[]),e.authIds=e.authIds.join(","),isUndefined(e.menuIds)&&(e.menuIds=[]),e.menuIds=e.menuIds.join(","),e}(e),r.ajax.post({url:i,data:e,success:function(e){var t=this.props.onAddSuccess;l.message.success(e.msg),this.getRoleAddDialog().closeDialog(),isUndefined(t)||t(e.data.role),this.getRoleAddDialog().clearForm()}.bind(this),failure:function(e){l.message.error(e.msg)},complete:function(){a(),this.getRoleAddDialog().formLeaveLoading()}.bind(this)})},handleCancel:function(){},componentDidMount:function(){},render:function(){var e=this.state,t=e.title,a=e.auths,i=e.menus,n=[];!isUndefined(a)&&a.length>=1&&(n=a.map(function(e,t){var a=e.id+"",i="权限："+e.authName+"\r\n简介:"+e.description;return o.default.createElement(u,{title:i,key:e.id,value:a},e.authName)}.bind(this)));var r=[];!isUndefined(i)&&i.length>=1&&(r=i.map(function(e,t){return o.default.createElement(c,{key:t,label:e.menuName},e.child.map(function(e,t){var a=e.id+"";return o.default.createElement(u,{key:e.id,value:a},e.menuName)}))}.bind(this)));var s=[{cols:[{col:{span:11},label:"名称",id:"roleName",config:{rules:[{required:!0,message:"请输入角色名称!"}]},input:o.default.createElement(l.Input,{placeholder:"请输入角色名称"})},{col:{span:2},input:o.default.createElement("div",null)},{col:{span:11},label:"状态",id:"status",config:{rules:[{required:!0,message:"请输入状态!"}]},input:o.default.createElement(l.Select,{placeholder:"请输入状态"},o.default.createElement(u,{value:"1"},"正常"),o.default.createElement(u,{value:"2"},"冻结"))}]},{cols:[{col:{span:24},label:"权限",id:"authIds",config:{rules:[{required:!1,message:"请选择权限!"}]},input:o.default.createElement(l.Select,{showSearch:!0,mode:"multiple",optionFilterProp:"children",notFoundContent:"无相关权限",placeholder:"请选择权限",style:{width:"100%"}},n)}]},{cols:[{col:{span:24},label:"菜单",id:"menuIds",config:{rules:[{required:!1,message:"请选择菜单!"}]},input:o.default.createElement(l.Select,{showSearch:!0,mode:"multiple",optionFilterProp:"children",notFoundContent:"无相关菜单",placeholder:"请选择菜单",style:{width:"100%"}},r)}]},{cols:[{col:{span:24},label:"简介",id:"description",config:{rules:[{required:!0,message:"请输入简介!"}]},input:o.default.createElement(m,{placeholder:"请输入简介",autosize:{minRows:4,maxRows:8}})}]}];return o.default.createElement(d.default,{title:t,formRows:s,handleSubmit:this.handleSubmit,handleCancel:this.handleCancel,ref:"role_add_dialog"})}});t.default=f},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),o=i(n),l=a(1),r=a(6),s=(i(r),a(4));a(18),a(2);var d=(a(3),a(5)),u=(i(d),a(19)),c=i(u),m=(l.Select.Option,l.Layout.Header,l.Layout.Content,l.Layout.Footer,l.Layout.Slider,l.Menu.SubMenu,l.Input.Search,l.Input.TextArea,o.default.createClass({displayName:"AdminLoginLogsPage",getInitialState:function(){return{}},componentDidMount:function(){this.getAdminLoginLogsTable().loadAdminLoginLogsTableData()},getAdminLoginLogsTable:function(){return this.refs.admin_login_logs_table},render:function(){return o.default.createElement("div",null,o.default.createElement(c.default,{ref:"admin_login_logs_table"}))}}));t.default=(0,s.withRouter)(m)},function(e,t){}]);